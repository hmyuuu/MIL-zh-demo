<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.0, mkdocs-material-9.5.31"><title>S02 Differential Calculus in Normed Spaces - MIL</title><link rel=stylesheet href=../../../assets/stylesheets/main.3cba04c6.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../assets/css/custom.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=green data-md-color-accent=light-green> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#differential-calculus-in-normed-spaces class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title=MIL class="md-header__button md-logo" aria-label=MIL data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> MIL </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> S02 Differential Calculus in Normed Spaces </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/hmyuuu/MIL-zh-demo title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> MIL-zh-demo </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../../en/ class=md-tabs__link> 目录 </a> </li> <li class=md-tabs__item> <a href=../../../en/C01_Introduction/ class=md-tabs__link> Introduction </a> </li> <li class=md-tabs__item> <a href=../../../en/C02_Basics/ class=md-tabs__link> Basics </a> </li> <li class=md-tabs__item> <a href=../../../en/C03_Logic/ class=md-tabs__link> Logic </a> </li> <li class=md-tabs__item> <a href=../../../en/C04_Sets_and_Functions/ class=md-tabs__link> Sets and Functions </a> </li> <li class=md-tabs__item> <a href=../../../en/C05_Elementary_Number_Theory/ class=md-tabs__link> Elementary Number Theory </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title=MIL class="md-nav__button md-logo" aria-label=MIL data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> MIL </label> <div class=md-nav__source> <a href=https://github.com/hmyuuu/MIL-zh-demo title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> MIL-zh-demo </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../en/ class=md-nav__link> <span class=md-ellipsis> 目录 </span> </a> </li> <li class=md-nav__item> <a href=../../../en/C01_Introduction/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../../en/C02_Basics/ class=md-nav__link> <span class=md-ellipsis> Basics </span> </a> </li> <li class=md-nav__item> <a href=../../../en/C03_Logic/ class=md-nav__link> <span class=md-ellipsis> Logic </span> </a> </li> <li class=md-nav__item> <a href=../../../en/C04_Sets_and_Functions/ class=md-nav__link> <span class=md-ellipsis> Sets and Functions </span> </a> </li> <li class=md-nav__item> <a href=../../../en/C05_Elementary_Number_Theory/ class=md-nav__link> <span class=md-ellipsis> Elementary Number Theory </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#differential-calculus-in-normed-spaces class=md-nav__link> <span class=md-ellipsis> Differential Calculus in Normed Spaces </span> </a> </li> <li class=md-nav__item> <a href=#check-hasfderivwithinat class=md-nav__link> <span class=md-ellipsis> check HasFDerivWithinAt </span> </a> </li> <li class=md-nav__item> <a href=#check-hasfderivatfilter class=md-nav__link> <span class=md-ellipsis> check HasFDerivAtFilter </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <p>import MIL.Common import Mathlib.Analysis.NormedSpace.BanachSteinhaus import Mathlib.Analysis.NormedSpace.FiniteDimension import Mathlib.Analysis.Calculus.InverseFunctionTheorem.FDeriv import Mathlib.Analysis.Calculus.ContDiff.RCLike import Mathlib.Analysis.Calculus.FDeriv.Prod</p> <p>open Set Filter</p> <p>open Topology Filter</p> <p>noncomputable section</p> <p>/- TEXT: .. index:: normed space</p> <p>.. _normed_spaces:</p> <h2 id=differential-calculus-in-normed-spaces>Differential Calculus in Normed Spaces<a class=headerlink href=#differential-calculus-in-normed-spaces title="Permanent link">&para;</a></h2> <p>Normed spaces <sup>^</sup><sup>^</sup><sup>^</sup><sup>^</sup>^</p> <p>Differentiation can be generalized beyond <code>ℝ</code> using the notion of a <em>normed vector space</em>, which encapsulates both direction and distance. We start with the notion of a <em>normed group</em>, which as an additive commutative group equipped with a real-valued norm function satisfying the following conditions. EXAMPLES: -/ section</p> <p>-- QUOTE: variable {E : Type*} [NormedAddCommGroup E]</p> <p>example (x : E) : 0 ≤ ‖x‖ := norm_nonneg x</p> <p>example {x : E} : ‖x‖ = 0 ↔ x = 0 := norm_eq_zero</p> <p>example (x y : E) : ‖x + y‖ ≤ ‖x‖ + ‖y‖ := norm_add_le x y -- QUOTE.</p> <p>/- TEXT: Every normed space is a metric space with distance function :math:<code>d(x, y) = \| x - y \|</code>, and hence it is also a topological space. Lean and Mathlib know this. EXAMPLES: -/ -- QUOTE: example : MetricSpace E := by infer_instance</p> <p>example {X : Type*} [TopologicalSpace X] {f : X → E} (hf : Continuous f) : Continuous fun x ↦ ‖f x‖ := hf.norm -- QUOTE.</p> <p>/- TEXT: In order to use the notion of a norm with concepts from linear algebra, we add the assumption <code>NormedSpace ℝ E</code> on top of <code>NormedAddGroup E</code>. This stipulates that <code>E</code> is a vector space over <code>ℝ</code> and that scalar multiplication satisfies the following condition. EXAMPLES: -/ -- QUOTE: variable [NormedSpace ℝ E]</p> <p>example (a : ℝ) (x : E) : ‖a • x‖ = |a| * ‖x‖ := norm_smul a x -- QUOTE.</p> <p>/- TEXT: A complete normed space is known as a <em>Banach space</em>. Every finite-dimensional vector space is complete. EXAMPLES: -/ -- QUOTE: example [FiniteDimensional ℝ E] : CompleteSpace E := by infer_instance -- QUOTE.</p> <p>/- TEXT: In all the previous examples, we used the real numbers as the base field. More generally, we can make sense of calculus with a vector space over any <em>nontrivially normed field</em>. These are fields that are equipped with a real-valued norm that is multiplicative and has the property that not every element has norm zero or one (equivalently, there is an element whose norm is bigger than one). EXAMPLES: -/ -- QUOTE: example (𝕜 : Type*) [NontriviallyNormedField 𝕜] (x y : 𝕜) : ‖x * y‖ = ‖x‖ * ‖y‖ := norm_mul x y</p> <p>example (𝕜 : Type*) [NontriviallyNormedField 𝕜] : ∃ x : 𝕜, 1 &lt; ‖x‖ := NormedField.exists_one_lt_norm 𝕜 -- QUOTE.</p> <p>/- TEXT: A finite-dimensional vector space over a nontrivially normed field is complete as long as the field itself is complete. EXAMPLES: -/ -- QUOTE: example (𝕜 : Type*) [NontriviallyNormedField 𝕜] (E : Type*) [NormedAddCommGroup E] [NormedSpace 𝕜 E] [CompleteSpace 𝕜] [FiniteDimensional 𝕜 E] : CompleteSpace E := FiniteDimensional.complete 𝕜 E -- QUOTE.</p> <p>end</p> <p>/- TEXT: Continuous linear maps <sup>^</sup><sup>^</sup><sup>^</sup><sup>^</sup><sup>^</sup><sup>^</sup><sup>^</sup>^</p> <p>We now turn to the morphisms in the category of normed spaces, namely, continuous linear maps. In Mathlib, the type of <code>𝕜</code>-linear continuous maps between normed spaces <code>E</code> and <code>F</code> is written <code>E →L[𝕜] F</code>. They are implemented as <em>bundled maps</em>, which means that an element of this type a structure that that includes the function itself and the properties of being linear and continuous. Lean will insert a coercion so that a continuous linear map can be treated as a function. EXAMPLES: -/ section</p> <p>-- QUOTE: variable {𝕜 : Type*} [NontriviallyNormedField 𝕜] {E : Type*} [NormedAddCommGroup E] [NormedSpace 𝕜 E] {F : Type*} [NormedAddCommGroup F] [NormedSpace 𝕜 F]</p> <p>example : E →L[𝕜] E := ContinuousLinearMap.id 𝕜 E</p> <p>example (f : E →L[𝕜] F) : E → F := f</p> <p>example (f : E →L[𝕜] F) : Continuous f := f.cont</p> <p>example (f : E →L[𝕜] F) (x y : E) : f (x + y) = f x + f y := f.map_add x y</p> <p>example (f : E →L[𝕜] F) (a : 𝕜) (x : E) : f (a • x) = a • f x := f.map_smul a x -- QUOTE.</p> <p>/- TEXT: Continuous linear maps have an operator norm that is characterized by the following properties. EXAMPLES: -/ -- QUOTE: variable (f : E →L[𝕜] F)</p> <p>example (x : E) : ‖f x‖ ≤ ‖f‖ * ‖x‖ := f.le_op_norm x</p> <p>example {M : ℝ} (hMp : 0 ≤ M) (hM : ∀ x, ‖f x‖ ≤ M * ‖x‖) : ‖f‖ ≤ M := f.op_norm_le_bound hMp hM -- QUOTE.</p> <p>end</p> <p>/- TEXT: There is also a notion of bundled continuous linear <em>isomorphism</em>. Their type of such isomorphisms is <code>E ≃L[𝕜] F</code>.</p> <p>As a challenging exercise, you can prove the Banach-Steinhaus theorem, also known as the Uniform Boundedness Principle. The principle states that a family of continuous linear maps from a Banach space into a normed space is pointwise bounded, then the norms of these linear maps are uniformly bounded. The main ingredient is Baire's theorem <code>nonempty_interior_of_iUnion_of_closed</code>. (You proved a version of this in the topology chapter.) Minor ingredients include <code>continuous_linear_map.opNorm_le_of_shell</code>, <code>interior_subset</code> and <code>interior_iInter_subset</code> and <code>is_closed_le</code>. BOTH: -/ section</p> <p>-- QUOTE: variable {𝕜 : Type*} [NontriviallyNormedField 𝕜] {E : Type*} [NormedAddCommGroup E] [NormedSpace 𝕜 E] {F : Type*} [NormedAddCommGroup F] [NormedSpace 𝕜 F]</p> <p>open Metric</p> <p>-- EXAMPLES: example {ι : Type*} [CompleteSpace E] {g : ι → E →L[𝕜] F} (h : ∀ x, ∃ C, ∀ i, ‖g i x‖ ≤ C) : ∃ C', ∀ i, ‖g i‖ ≤ C' := by -- sequence of subsets consisting of those <code>x : E</code> with norms <code>‖g i x‖</code> bounded by <code>n</code> let e : ℕ → Set E := fun n ↦ ⋂ i : ι, { x : E | ‖g i x‖ ≤ n } -- each of these sets is closed have hc : ∀ n : ℕ, IsClosed (e n) sorry -- the union is the entire space; this is where we use <code>h</code> have hU : (⋃ n : ℕ, e n) = univ sorry /- apply the Baire category theorem to conclude that for some <code>m : ℕ</code>, <code>e m</code> contains some <code>x</code> -/ obtain ⟨m, x, hx⟩ : ∃ m, ∃ x, x ∈ interior (e m) := sorry obtain ⟨ε, ε_pos, hε⟩ : ∃ ε &gt; 0, ball x ε ⊆ interior (e m) := sorry obtain ⟨k, hk⟩ : ∃ k : 𝕜, 1 &lt; ‖k‖ := sorry -- show all elements in the ball have norm bounded by <code>m</code> after applying any <code>g i</code> have real_norm_le : ∀ z ∈ ball x ε, ∀ (i : ι), ‖g i z‖ ≤ m sorry have εk_pos : 0 &lt; ε / ‖k‖ := sorry refine' ⟨(m + m : ℕ) / (ε / ‖k‖), fun i ↦ ContinuousLinearMap.opNorm_le_of_shell ε_pos _ hk _⟩ sorry sorry -- QUOTE.</p> <p>-- SOLUTIONS: example {ι : Type*} [CompleteSpace E] {g : ι → E →L[𝕜] F} (h : ∀ x, ∃ C, ∀ i, ‖g i x‖ ≤ C) : ∃ C', ∀ i, ‖g i‖ ≤ C' := by -- sequence of subsets consisting of those <code>x : E</code> with norms <code>‖g i x‖</code> bounded by <code>n</code> let e : ℕ → Set E := fun n ↦ ⋂ i : ι, { x : E | ‖g i x‖ ≤ n } -- each of these sets is closed have hc : ∀ n : ℕ, IsClosed (e n) := fun i ↦ isClosed_iInter fun i ↦ isClosed_le (g i).cont.norm continuous_const -- the union is the entire space; this is where we use <code>h</code> have hU : (⋃ n : ℕ, e n) = univ := by refine' eq_univ_of_forall fun x ↦ _ rcases h x with ⟨C, hC⟩ obtain ⟨m, hm⟩ := exists_nat_ge C exact ⟨e m, mem_range_self m, mem_iInter.mpr fun i ↦ le_trans (hC i) hm⟩ /- apply the Baire category theorem to conclude that for some <code>m : ℕ</code>, <code>e m</code> contains some <code>x</code> -/ obtain ⟨m : ℕ, x : E, hx : x ∈ interior (e m)⟩ := nonempty_interior_of_iUnion_of_closed hc hU obtain ⟨ε, ε_pos, hε : ball x ε ⊆ interior (e m)⟩ := isOpen_iff.mp isOpen_interior x hx obtain ⟨k : 𝕜, hk : 1 &lt; ‖k‖⟩ := NormedField.exists_one_lt_norm 𝕜 -- show all elements in the ball have norm bounded by <code>m</code> after applying any <code>g i</code> have real_norm_le : ∀ z ∈ ball x ε, ∀ (i : ι), ‖g i z‖ ≤ m := by intro z hz i replace hz := mem_iInter.mp (interior_iInter_subset _ (hε hz)) i apply interior_subset hz have εk_pos : 0 &lt; ε / ‖k‖ := div_pos ε_pos (zero_lt_one.trans hk) refine' ⟨(m + m : ℕ) / (ε / ‖k‖), fun i ↦ ContinuousLinearMap.opNorm_le_of_shell ε_pos _ hk _⟩ · exact div_nonneg (Nat.cast_nonneg _) εk_pos.le intro y le_y y_lt calc ‖g i y‖ = ‖g i (y + x) - g i x‖ := by rw [(g i).map_add, add_sub_cancel_right] _ ≤ ‖g i (y + x)‖ + ‖g i x‖ := (norm_sub_le _ _) _ ≤ m + m := (add_le_add (real_norm_le (y + x) (by rwa [add_comm, add_mem_ball_iff_norm]) i) (real_norm_le x (mem_ball_self ε_pos) i)) _ = (m + m : ℕ) := by norm_cast _ ≤ (m + m : ℕ) * (‖y‖ / (ε / ‖k‖)) := (le_mul_of_one_le_right (Nat.cast_nonneg _) ((one_le_div &lt;| div_pos ε_pos (zero_lt_one.trans hk)).2 le_y)) _ = (m + m : ℕ) / (ε / ‖k‖) * ‖y‖ := (mul_comm_div _ _ _).symm</p> <p>-- BOTH: end</p> <p>/- TEXT: Asymptotic comparisons <sup>^</sup><sup>^</sup><sup>^</sup><sup>^</sup><sup>^</sup><sup>^</sup><sup>^</sup>^</p> <p>Defining differentiability also requires asymptotic comparisons. Mathlib has an extensive library covering the big O and little o relations, whose definitions are shown below. Opening the <code>asymptotics</code> locale allows us to use the corresponding notation. Here we will only use little o to define differentiability. EXAMPLES: -/ -- QUOTE: open Asymptotics</p> <p>example {α : Type*} {E : Type*} [NormedGroup E] {F : Type*} [NormedGroup F] (c : ℝ) (l : Filter α) (f : α → E) (g : α → F) : IsBigOWith c l f g ↔ ∀ᶠ x in l, ‖f x‖ ≤ c * ‖g x‖ := isBigOWith_iff</p> <p>example {α : Type*} {E : Type*} [NormedGroup E] {F : Type*} [NormedGroup F] (l : Filter α) (f : α → E) (g : α → F) : f =O[l] g ↔ ∃ C, IsBigOWith C l f g := isBigO_iff_isBigOWith</p> <p>example {α : Type*} {E : Type*} [NormedGroup E] {F : Type*} [NormedGroup F] (l : Filter α) (f : α → E) (g : α → F) : f =o[l] g ↔ ∀ C &gt; 0, IsBigOWith C l f g := isLittleO_iff_forall_isBigOWith</p> <p>example {α : Type*} {E : Type*} [NormedAddCommGroup E] (l : Filter α) (f g : α → E) : f ~[l] g ↔ (f - g) =o[l] g := Iff.rfl -- QUOTE.</p> <p>/- TEXT: Differentiability <sup>^</sup><sup>^</sup><sup>^</sup><sup>^</sup><sup>^</sup>^^</p> <p>We are now ready to discuss differentiable functions between normed spaces. In analogy the elementary one-dimensional, Mathlib defines a predicate <code>HasFDerivAt</code> and a function <code>fderiv</code>. Here the letter "f" stands for <em>Fréchet</em>. EXAMPLES: -/ section</p> <p>-- QUOTE: open Topology</p> <p>variable {𝕜 : Type*} [NontriviallyNormedField 𝕜] {E : Type*} [NormedAddCommGroup E] [NormedSpace 𝕜 E] {F : Type*} [NormedAddCommGroup F] [NormedSpace 𝕜 F]</p> <p>example (f : E → F) (f' : E →L[𝕜] F) (x₀ : E) : HasFDerivAt f f' x₀ ↔ (fun x ↦ f x - f x₀ - f' (x - x₀)) =o[𝓝 x₀] fun x ↦ x - x₀ := hasFDerivAtFilter_iff_isLittleO ..</p> <p>example (f : E → F) (f' : E →L[𝕜] F) (x₀ : E) (hff' : HasFDerivAt f f' x₀) : fderiv 𝕜 f x₀ = f' := hff'.fderiv -- QUOTE.</p> <p>/- TEXT: We also have iterated derivatives that take values in the type of multilinear maps <code>E [×n]→L[𝕜] F</code>, and we have continuously differential functions. The type <code>WithTop ℕ</code> is <code>ℕ</code> with an additional element <code>⊤</code> that is bigger than every natural number. So :math:<code>\mathcal{C}^\infty</code> functions are functions <code>f</code> that satisfy <code>ContDiff 𝕜 ⊤ f</code>. EXAMPLES: -/ -- QUOTE: example (n : ℕ) (f : E → F) : E → E[×n]→L[𝕜] F := iteratedFDeriv 𝕜 n f</p> <p>example (n : WithTop ℕ) {f : E → F} : ContDiff 𝕜 n f ↔ (∀ m : ℕ, (m : WithTop ℕ) ≤ n → Continuous fun x ↦ iteratedFDeriv 𝕜 m f x) ∧ ∀ m : ℕ, (m : WithTop ℕ) &lt; n → Differentiable 𝕜 fun x ↦ iteratedFDeriv 𝕜 m f x := contDiff_iff_continuous_differentiable -- QUOTE.</p> <p>/- TEXT: There is a stricter notion of differentiability called <code>HasStrictFDerivAt</code>, which is used in the statement of the inverse function theorem and the statement of the implicit function theorem, both of which are in Mathlib. Over <code>ℝ</code> or <code>ℂ</code>, continuously differentiable functions are strictly differentiable. EXAMPLES: -/ -- QUOTE: example {𝕂 : Type*} [RCLike 𝕂] {E : Type*} [NormedAddCommGroup E] [NormedSpace 𝕂 E] {F : Type*} [NormedAddCommGroup F] [NormedSpace 𝕂 F] {f : E → F} {x : E} {n : WithTop ℕ} (hf : ContDiffAt 𝕂 n f x) (hn : 1 ≤ n) : HasStrictFDerivAt f (fderiv 𝕂 f x) x := hf.hasStrictFDerivAt hn -- QUOTE.</p> <p>/- TEXT: The local inverse theorem is stated using an operation that produces an inverse function from a function and the assumptions that the function is strictly differentiable at a point <code>a</code> and that its derivative is an isomorphism.</p> <p>The first example below gets this local inverse. The next one states that it is indeed a local inverse from the left and from the right, and that it is strictly differentiable. EXAMPLES: -/ -- QUOTE: section LocalInverse variable [CompleteSpace E] {f : E → F} {f' : E ≃L[𝕜] F} {a : E}</p> <p>example (hf : HasStrictFDerivAt f (f' : E →L[𝕜] F) a) : F → E := HasStrictFDerivAt.localInverse f f' a hf</p> <p>example (hf : HasStrictFDerivAt f (f' : E →L[𝕜] F) a) : ∀ᶠ x in 𝓝 a, hf.localInverse f f' a (f x) = x := hf.eventually_left_inverse</p> <p>example (hf : HasStrictFDerivAt f (f' : E →L[𝕜] F) a) : ∀ᶠ x in 𝓝 (f a), f (hf.localInverse f f' a x) = x := hf.eventually_right_inverse</p> <p>example {f : E → F} {f' : E ≃L[𝕜] F} {a : E} (hf : HasStrictFDerivAt f (f' : E →L[𝕜] F) a) : HasStrictFDerivAt (HasStrictFDerivAt.localInverse f f' a hf) (f'.symm : F →L[𝕜] E) (f a) := HasStrictFDerivAt.to_localInverse hf</p> <p>end LocalInverse -- QUOTE.</p> <p>/- TEXT: This has been only a quick tour of the differential calculus in Mathlib. The library contains many variations that we have not discussed. For example, you may want to use one-sided derivatives in the one-dimensional setting. The means to do so are found in Mathlib in a more general context; see <code>HasFDerivWithinAt</code> or the even more general <code>HasFDerivAtFilter</code>. EXAMPLES: -/</p> <h1 id=check-hasfderivwithinat>check HasFDerivWithinAt<a class=headerlink href=#check-hasfderivwithinat title="Permanent link">&para;</a></h1> <h1 id=check-hasfderivatfilter>check HasFDerivAtFilter<a class=headerlink href=#check-hasfderivatfilter title="Permanent link">&para;</a></h1> <p>end</p> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.tabs", "navigation.sections", "navigation.instant", "search.highlight", "search.share", "content.code.copy", "content.code.annotate"], "search": "../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"alias": true, "default": "latest", "provider": "mike"}}</script> <script src=../../../assets/javascripts/bundle.fe8b6f2b.min.js></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> </body> </html>