<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.0, mkdocs-material-9.5.31"><title>S01 Calculating - MIL</title><link rel=stylesheet href=../../../assets/stylesheets/main.3cba04c6.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../assets/css/custom.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=green data-md-color-accent=light-green> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#check-a class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title=MIL class="md-header__button md-logo" aria-label=MIL data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> MIL </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> S01 Calculating </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/hmyuuu/MIL-zh-demo title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> MIL-zh-demo </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../../en/ class=md-tabs__link> 目录 </a> </li> <li class=md-tabs__item> <a href=../../../en/C01_Introduction/ class=md-tabs__link> Introduction </a> </li> <li class=md-tabs__item> <a href=../../../en/C02_Basics/ class=md-tabs__link> Basics </a> </li> <li class=md-tabs__item> <a href=../../../en/C03_Logic/ class=md-tabs__link> Logic </a> </li> <li class=md-tabs__item> <a href=../../../en/C04_Sets_and_Functions/ class=md-tabs__link> Sets and Functions </a> </li> <li class=md-tabs__item> <a href=../../../en/C05_Elementary_Number_Theory/ class=md-tabs__link> Elementary Number Theory </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title=MIL class="md-nav__button md-logo" aria-label=MIL data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> MIL </label> <div class=md-nav__source> <a href=https://github.com/hmyuuu/MIL-zh-demo title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> MIL-zh-demo </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../en/ class=md-nav__link> <span class=md-ellipsis> 目录 </span> </a> </li> <li class=md-nav__item> <a href=../../../en/C01_Introduction/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../../en/C02_Basics/ class=md-nav__link> <span class=md-ellipsis> Basics </span> </a> </li> <li class=md-nav__item> <a href=../../../en/C03_Logic/ class=md-nav__link> <span class=md-ellipsis> Logic </span> </a> </li> <li class=md-nav__item> <a href=../../../en/C04_Sets_and_Functions/ class=md-nav__link> <span class=md-ellipsis> Sets and Functions </span> </a> </li> <li class=md-nav__item> <a href=../../../en/C05_Elementary_Number_Theory/ class=md-nav__link> <span class=md-ellipsis> Elementary Number Theory </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <p>import MIL.Common import Mathlib.Data.Real.Basic /- TEXT: Calculating</p> <hr> <p>We generally learn to carry out mathematical calculations without thinking of them as proofs. But when we justify each step in a calculation, as Lean requires us to do, the net result is a proof that the left-hand side of the calculation is equal to the right-hand side.</p> <p>.. index:: rewrite, rw, tactics ; rw and rewrite</p> <p>In Lean, stating a theorem is tantamount to stating a goal, namely, the goal of proving the theorem. Lean provides the rewriting tactic <code>rw</code>, to replace the left-hand side of an identity by the right-hand side in the goal. If <code>a</code>, <code>b</code>, and <code>c</code> are real numbers, <code>mul_assoc a b c</code> is the identity <code>a * b * c = a * (b * c)</code> and <code>mul_comm a b</code> is the identity <code>a * b = b * a</code>. Lean provides automation that generally eliminates the need to refer the facts like these explicitly, but they are useful for the purposes of illustration. In Lean, multiplication associates to the left, so the left-hand side of <code>mul_assoc</code> could also be written <code>(a * b) * c</code>. However, it is generally good style to be mindful of Lean's notational conventions and leave out parentheses when Lean does as well.</p> <p>Let's try out <code>rw</code>.</p> <p>.. index:: real numbers TEXT. -/ -- An example. -- QUOTE: example (a b c : ℝ) : a * b * c = b * (a * c) := by rw [mul_comm a b] rw [mul_assoc b a c] -- QUOTE.</p> <p>/- TEXT: The <code>import</code> lines at the beginning of the associated examples file import the theory of the real numbers from Mathlib, as well as useful automation. For the sake of brevity, we generally suppress information like this in the textbook.</p> <p>You are welcome to make changes to see what happens. You can type the <code>ℝ</code> character as <code>\R</code> or <code>\real</code> in VS Code. The symbol doesn't appear until you hit space or the tab key. If you hover over a symbol when reading a Lean file, VS Code will show you the syntax that can be used to enter it. If you are curious to see all available abbreviations, you can hit Ctrl-Shift-P and then type abbreviations to get access to the <code>Lean 4: Show all abbreviations</code> command. If your keyboard does not have an easily accessible backslash, you can change the leading character by changing the <code>lean4.input.leader</code> setting.</p> <p>.. index:: proof state, local context, goal</p> <p>When a cursor is in the middle of a tactic proof, Lean reports on the current <em>proof state</em> in the <em>Lean Infoview</em> window. As you move your cursor past each step of the proof, you can see the state change. A typical proof state in Lean might look as follows:</p> <p>.. code-block::</p> <div class=codehilite><pre><span></span><code>1 goal
x y : ℕ,
h₁ : Prime x,
h₂ : ¬Even x,
h₃ : y &gt; x
⊢ y ≥ 4
</code></pre></div> <p>The lines before the one that begins with <code>⊢</code> denote the <em>context</em>: they are the objects and assumptions currently at play. In this example, these include two objects, <code>x</code> and <code>y</code>, each a natural number. They also include three assumptions, labelled <code>h₁</code>, <code>h₂</code>, and <code>h₃</code>. In Lean, everything in a context is labelled with an identifier. You can type these subscripted labels as <code>h\1</code>, <code>h\2</code>, and <code>h\3</code>, but any legal identifiers would do: you can use <code>h1</code>, <code>h2</code>, <code>h3</code> instead, or <code>foo</code>, <code>bar</code>, and <code>baz</code>. The last line represents the <em>goal</em>, that is, the fact to be proved. Sometimes people use <em>target</em> for the fact to be proved, and <em>goal</em> for the combination of the context and the target. In practice, the intended meaning is usually clear.</p> <p>Try proving these identities, in each case replacing <code>sorry</code> by a tactic proof. With the <code>rw</code> tactic, you can use a left arrow (<code>\l</code>) to reverse an identity. For example, <code>rw [← mul_assoc a b c]</code> replaces <code>a * (b * c)</code> by <code>a * b * c</code> in the current goal. Note that the left-pointing arrow refers to going from right to left in the identity provided by <code>mul_assoc</code>, it has nothing to do with the left or right side of the goal. TEXT. -/ -- Try these. -- QUOTE: example (a b c : ℝ) : c * b * a = b * (a * c) := by sorry</p> <p>example (a b c : ℝ) : a * (b * c) = b * (a * c) := by sorry -- QUOTE.</p> <p>-- SOLUTIONS: example (a b c : ℝ) : c * b * a = b * (a * c) := by rw [mul_comm c b] rw [mul_assoc b c a] rw [mul_comm c a]</p> <p>example (a b c : ℝ) : a * (b * c) = b * (a * c) := by rw [← mul_assoc a b c] rw [mul_comm a b] rw [mul_assoc b a c]</p> <p>/- TEXT: You can also use identities like <code>mul_assoc</code> and <code>mul_comm</code> without arguments. In this case, the rewrite tactic tries to match the left-hand side with an expression in the goal, using the first pattern it finds. TEXT. -/ -- An example. -- QUOTE: example (a b c : ℝ) : a * b * c = b * c * a := by rw [mul_assoc] rw [mul_comm] -- QUOTE.</p> <p>/- TEXT: You can also provide <em>partial</em> information. For example, <code>mul_comm a</code> matches any pattern of the form <code>a * ?</code> and rewrites it to <code>? * a</code>. Try doing the first of these examples without providing any arguments at all, and the second with only one argument. TEXT. -/ /- Try doing the first of these without providing any arguments at all, and the second with only one argument. -/ -- QUOTE: example (a b c : ℝ) : a * (b * c) = b * (c * a) := by sorry</p> <p>example (a b c : ℝ) : a * (b * c) = b * (a * c) := by sorry -- QUOTE.</p> <p>-- SOLUTIONS: example (a b c : ℝ) : a * (b * c) = b * (c * a) := by rw [mul_comm] rw [mul_assoc]</p> <p>example (a b c : ℝ) : a * (b * c) = b * (a * c) := by rw [← mul_assoc] rw [mul_comm a] rw [mul_assoc]</p> <p>/- TEXT: You can also use <code>rw</code> with facts from the local context. TEXT. -/ -- Using facts from the local context. -- QUOTE: example (a b c d e f : ℝ) (h : a * b = c * d) (h' : e = f) : a * (b * e) = c * (d * f) := by rw [h'] rw [← mul_assoc] rw [h] rw [mul_assoc] -- QUOTE.</p> <p>/- TEXT: Try these, using the theorem <code>sub_self</code> for the second one: TEXT. -/ -- QUOTE: example (a b c d e f : ℝ) (h : b * c = e * f) : a * b * c * d = a * e * f * d := by sorry</p> <p>example (a b c d : ℝ) (hyp : c = b * a - d) (hyp' : d = a * b) : c = 0 := by sorry -- QUOTE.</p> <p>-- SOLUTIONS: example (a b c d e f : ℝ) (h : b * c = e * f) : a * b * c * d = a * e * f * d := by rw [mul_assoc a] rw [h] rw [← mul_assoc]</p> <p>example (a b c d : ℝ) (hyp : c = b * a - d) (hyp' : d = a * b) : c = 0 := by rw [hyp] rw [hyp'] rw [mul_comm] rw [sub_self]</p> <p>/- TEXT: Multiple rewrite commands can be carried out with a single command, by listing the relevant identities separated by commas inside the square brackets. TEXT. -/ -- QUOTE: example (a b c d e f : ℝ) (h : a * b = c * d) (h' : e = f) : a * (b * e) = c * (d * f) := by rw [h', ← mul_assoc, h, mul_assoc] -- QUOTE.</p> <p>/- TEXT: You still see the incremental progress by placing the cursor after a comma in any list of rewrites.</p> <p>Another trick is that we can declare variables once and for all outside an example or theorem. Lean then includes them automatically. TEXT. -/ section</p> <p>-- QUOTE: variable (a b c d e f : ℝ)</p> <p>example (h : a * b = c * d) (h' : e = f) : a * (b * e) = c * (d * f) := by rw [h', ← mul_assoc, h, mul_assoc] -- QUOTE.</p> <p>end</p> <p>/- TEXT: Inspection of the tactic state at the beginning of the above proof reveals that Lean indeed included all variables. We can delimit the scope of the declaration by putting it in a <code>section ... end</code> block. Finally, recall from the introduction that Lean provides us with a command to determine the type of an expression: TEXT. -/ -- QUOTE: section variable (a b c : ℝ)</p> <h1 id=check-a>check a<a class=headerlink href=#check-a title="Permanent link">&para;</a></h1> <h1 id=check-a-b>check a + b<a class=headerlink href=#check-a-b title="Permanent link">&para;</a></h1> <h1 id=check-a-r>check (a : ℝ)<a class=headerlink href=#check-a-r title="Permanent link">&para;</a></h1> <h1 id=check-mul_comm-a-b>check mul_comm a b<a class=headerlink href=#check-mul_comm-a-b title="Permanent link">&para;</a></h1> <h1 id=check-mul_comm-a-b-a-b-b-a>check (mul_comm a b : a * b = b * a)<a class=headerlink href=#check-mul_comm-a-b-a-b-b-a title="Permanent link">&para;</a></h1> <h1 id=check-mul_assoc-c-a-b>check mul_assoc c a b<a class=headerlink href=#check-mul_assoc-c-a-b title="Permanent link">&para;</a></h1> <h1 id=check-mul_comm-a>check mul_comm a<a class=headerlink href=#check-mul_comm-a title="Permanent link">&para;</a></h1> <h1 id=check-mul_comm>check mul_comm<a class=headerlink href=#check-mul_comm title="Permanent link">&para;</a></h1> <p>end -- QUOTE.</p> <p>/- TEXT: The <code>#check</code> command works for both objects and facts. In response to the command <code>#check a</code>, Lean reports that <code>a</code> has type <code>ℝ</code>. In response to the command <code>#check mul_comm a b</code>, Lean reports that <code>mul_comm a b</code> is a proof of the fact <code>a * b = b * a</code>. The command <code>#check (a : ℝ)</code> states our expectation that the type of <code>a</code> is <code>ℝ</code>, and Lean will raise an error if that is not the case. We will explain the output of the last three <code>#check</code> commands later, but in the meanwhile, you can take a look at them, and experiment with some <code>#check</code> commands of your own.</p> <p>Let's try some more examples. The theorem <code>two_mul a</code> says that <code>2 * a = a + a</code>. The theorems <code>add_mul</code> and <code>mul_add</code> express the distributivity of multiplication over addition, and the theorem <code>add_assoc</code> expresses the associativity of addition. Use the <code>#check</code> command to see the precise statements.</p> <p>.. index:: calc, tactics ; calc TEXT. -/ section variable (a b : ℝ)</p> <p>-- QUOTE: example : (a + b) * (a + b) = a * a + 2 * (a * b) + b * b := by rw [mul_add, add_mul, add_mul] rw [← add_assoc, add_assoc (a * a)] rw [mul_comm b a, ← two_mul] -- QUOTE.</p> <p>/- TEXT: Whereas it is possible to figure out what it going on in this proof by stepping through it in the editor, it is hard to read on its own. Lean provides a more structured way of writing proofs like this using the <code>calc</code> keyword. TEXT. -/ -- QUOTE: example : (a + b) * (a + b) = a * a + 2 * (a * b) + b * b := calc (a + b) * (a + b) = a * a + b * a + (a * b + b * b) := by rw [mul_add, add_mul, add_mul] _ = a * a + (b * a + a * b) + b * b := by rw [← add_assoc, add_assoc (a * a)] _ = a * a + 2 * (a * b) + b * b := by rw [mul_comm b a, ← two_mul] -- QUOTE.</p> <p>/- TEXT: Notice that the proof does <em>not</em> begin with <code>by</code>: an expression that begins with <code>calc</code> is a <em>proof term</em>. A <code>calc</code> expression can also be used inside a tactic proof, but Lean interprets it as the instruction to use the resulting proof term to solve the goal. The <code>calc</code> syntax is finicky: the underscores and justification have to be in the format indicated above. Lean uses indentation to determine things like where a block of tactics or a <code>calc</code> block begins and ends; try changing the indentation in the proof above to see what happens.</p> <p>One way to write a <code>calc</code> proof is to outline it first using the <code>sorry</code> tactic for justification, make sure Lean accepts the expression modulo these, and then justify the individual steps using tactics. TEXT. -/ -- QUOTE: example : (a + b) * (a + b) = a * a + 2 * (a * b) + b * b := calc (a + b) * (a + b) = a * a + b * a + (a * b + b * b) := by sorry _ = a * a + (b * a + a * b) + b * b := by sorry _ = a * a + 2 * (a * b) + b * b := by sorry -- QUOTE.</p> <p>end</p> <p>/- TEXT: Try proving the following identity using both a pure <code>rw</code> proof and a more structured <code>calc</code> proof: TEXT. -/ -- Try these. For the second, use the theorems listed underneath. section variable (a b c d : ℝ)</p> <p>-- QUOTE: example : (a + b) * (c + d) = a * c + a * d + b * c + b * d := by sorry -- QUOTE.</p> <p>/- TEXT: The following exercise is a little more challenging. You can use the theorems listed underneath. TEXT. -/ -- QUOTE: example (a b : ℝ) : (a + b) * (a - b) = a ^ 2 - b ^ 2 := by sorry</p> <h1 id=check-pow_two-a>check pow_two a<a class=headerlink href=#check-pow_two-a title="Permanent link">&para;</a></h1> <h1 id=check-mul_sub-a-b-c>check mul_sub a b c<a class=headerlink href=#check-mul_sub-a-b-c title="Permanent link">&para;</a></h1> <h1 id=check-add_mul-a-b-c>check add_mul a b c<a class=headerlink href=#check-add_mul-a-b-c title="Permanent link">&para;</a></h1> <h1 id=check-add_sub-a-b-c>check add_sub a b c<a class=headerlink href=#check-add_sub-a-b-c title="Permanent link">&para;</a></h1> <h1 id=check-sub_sub-a-b-c>check sub_sub a b c<a class=headerlink href=#check-sub_sub-a-b-c title="Permanent link">&para;</a></h1> <h1 id=check-add_zero-a>check add_zero a<a class=headerlink href=#check-add_zero-a title="Permanent link">&para;</a></h1> <p>-- QUOTE.</p> <p>end</p> <p>/- TEXT: .. index:: rw, tactics ; rw and rewrite</p> <p>We can also perform rewriting in an assumption in the context. For example, <code>rw [mul_comm a b] at hyp</code> replaces <code>a * b</code> by <code>b * a</code> in the assumption <code>hyp</code>. TEXT. -/ -- Examples.</p> <p>section variable (a b c d : ℝ)</p> <p>-- QUOTE: example (a b c d : ℝ) (hyp : c = d * a + b) (hyp' : b = a * d) : c = 2 * a * d := by rw [hyp'] at hyp rw [mul_comm d a] at hyp rw [← two_mul (a * d)] at hyp rw [← mul_assoc 2 a d] at hyp exact hyp -- QUOTE.</p> <p>/- TEXT: .. index:: exact, tactics ; exact</p> <p>In the last step, the <code>exact</code> tactic can use <code>hyp</code> to solve the goal because at that point <code>hyp</code> matches the goal exactly.</p> <p>.. index:: ring (tactic), tactics ; ring</p> <p>We close this section by noting that Mathlib provides a useful bit of automation with a <code>ring</code> tactic, which is designed to prove identities in any commutative ring as long as they follow purely from the ring axioms, without using any local assumption. TEXT. -/ -- QUOTE: example : c * b * a = b * (a * c) := by ring</p> <p>example : (a + b) * (a + b) = a * a + 2 * (a * b) + b * b := by ring</p> <p>example : (a + b) * (a - b) = a ^ 2 - b ^ 2 := by ring</p> <p>example (hyp : c = d * a + b) (hyp' : b = a * d) : c = 2 * a * d := by rw [hyp, hyp'] ring -- QUOTE.</p> <p>end</p> <p>/- TEXT: The <code>ring</code> tactic is imported indirectly when we import <code>Mathlib.Data.Real.Basic</code>, but we will see in the next section that it can be used for calculations on structures other than the real numbers. It can be imported explicitly with the command <code>import Mathlib.Tactic</code>. We will see there are similar tactics for other common kind of algebraic structures.</p> <p>There is a variation of <code>rw</code> called <code>nth_rw</code> that allows you to replace only particular instances of an expression in the goal. Possible matches are enumerated starting with 1, so in the following example, <code>nth_rw 2 [h]</code> replaces the second occurrence of <code>a + b</code> with <code>c</code>. EXAMPLES: -/ -- QUOTE: example (a b c : ℕ) (h : a + b = c) : (a + b) * (a + b) = a * c + b * c := by nth_rw 2 [h] rw [add_mul] -- QUOTE.</p> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.tabs", "navigation.sections", "navigation.instant", "search.highlight", "search.share", "content.code.copy", "content.code.annotate"], "search": "../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"alias": true, "default": "latest", "provider": "mike"}}</script> <script src=../../../assets/javascripts/bundle.fe8b6f2b.min.js></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> </body> </html>