<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=../C04_Sets_and_Functions/ rel=prev><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.0, mkdocs-material-9.5.31"><title>Elementary Number Theory - MIL</title><link rel=stylesheet href=../../assets/stylesheets/main.3cba04c6.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../assets/css/custom.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=green data-md-color-accent=light-green> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#elementary-number-theory class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title=MIL class="md-header__button md-logo" aria-label=MIL data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> MIL </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Elementary Number Theory </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/hmyuuu/MIL-zh-demo title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> MIL-zh-demo </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../ class=md-tabs__link> 目录 </a> </li> <li class=md-tabs__item> <a href=../C01_Introduction/ class=md-tabs__link> Introduction </a> </li> <li class=md-tabs__item> <a href=../C02_Basics/ class=md-tabs__link> Basics </a> </li> <li class=md-tabs__item> <a href=../C03_Logic/ class=md-tabs__link> Logic </a> </li> <li class=md-tabs__item> <a href=../C04_Sets_and_Functions/ class=md-tabs__link> Sets and Functions </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=./ class=md-tabs__link> Elementary Number Theory </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title=MIL class="md-nav__button md-logo" aria-label=MIL data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> MIL </label> <div class=md-nav__source> <a href=https://github.com/hmyuuu/MIL-zh-demo title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> MIL-zh-demo </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> <span class=md-ellipsis> 目录 </span> </a> </li> <li class=md-nav__item> <a href=../C01_Introduction/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../C02_Basics/ class=md-nav__link> <span class=md-ellipsis> Basics </span> </a> </li> <li class=md-nav__item> <a href=../C03_Logic/ class=md-nav__link> <span class=md-ellipsis> Logic </span> </a> </li> <li class=md-nav__item> <a href=../C04_Sets_and_Functions/ class=md-nav__link> <span class=md-ellipsis> Sets and Functions </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Elementary Number Theory </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Elementary Number Theory </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#irrational-roots class=md-nav__link> <span class=md-ellipsis> Irrational Roots </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#irrational-roots class=md-nav__link> <span class=md-ellipsis> Irrational Roots </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=elementary-number-theory>Elementary Number Theory<a class=headerlink href=#elementary-number-theory title="Permanent link">&para;</a></h1> <p>In this chapter, we show you how to formalize some elementary results in number theory. As we deal with more substantive mathematical content, the proofs will get longer and more involved, building on the skills you have already mastered.</p> <h2 id=irrational-roots>Irrational Roots<a class=headerlink href=#irrational-roots title="Permanent link">&para;</a></h2> <p>Let's start with a fact known to the ancient Greeks, namely, that the square root of 2 is irrational. If we suppose otherwise, we can write <span class=arithmatex>\(\sqrt{2} = a / b\)</span> as a fraction in lowest terms. Squaring both sides yields <span class=arithmatex>\(a^2 = 2 b^2\)</span>, which implies that <span class=arithmatex>\(a\)</span> is even. If we write <span class=arithmatex>\(a = 2c\)</span>, then we get <span class=arithmatex>\(4c^2 = 2 b^2\)</span> and hence <span class=arithmatex>\(b^2 = 2 c^2\)</span>. This implies that <span class=arithmatex>\(b\)</span> is also even, contradicting the fact that we have assumed that <span class=arithmatex>\(a / b\)</span> has been reduced to lowest terms.</p> <p>Saying that <span class=arithmatex>\(a / b\)</span> is a fraction in lowest terms means that <span class=arithmatex>\(a\)</span> and <span class=arithmatex>\(b\)</span> do not have any factors in common, which is to say, they are <em>coprime</em>. Mathlib defines the predicate <code>Nat.Coprime m n</code> to be <code>Nat.gcd m n = 1</code>. Using Lean's anonymous projection notation, if <code>s</code> and <code>t</code> are expressions of type <code>Nat</code>, we can write <code>s.Coprime t</code> instead of <code>Nat.Coprime s t</code>, and similarly for <code>Nat.gcd</code>. As usual, Lean will often unfold the definition of <code>Nat.Coprime</code> automatically when necessary, but we can also do it manually by rewriting or simplifying with the identifier <code>Nat.Coprime</code>. The <code>norm_num</code> tactic is smart enough to compute concrete values.</p> <div class=highlight><pre><span></span><code><span class=k>#print</span><span class=w> </span><span class=n>Nat.Coprime</span>

<span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>m</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Nat</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>h</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>m.Coprime</span><span class=w> </span><span class=n>n</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>m.gcd</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=o>:=</span>
<span class=w>  </span><span class=n>h</span>

<span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>m</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Nat</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>h</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>m.Coprime</span><span class=w> </span><span class=n>n</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>m.gcd</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=n>Nat.Coprime</span><span class=o>]</span><span class=w> </span><span class=n>at</span><span class=w> </span><span class=n>h</span>
<span class=w>  </span><span class=n>exact</span><span class=w> </span><span class=n>h</span>

<span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Nat.Coprime</span><span class=w> </span><span class=mi>12</span><span class=w> </span><span class=mi>7</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span><span class=w> </span><span class=n>norm_num</span>

<span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Nat.gcd</span><span class=w> </span><span class=mi>12</span><span class=w> </span><span class=mi>8</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=mi>4</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span><span class=w> </span><span class=n>norm_num</span>
</code></pre></div> <p>We have already encountered the <code>gcd</code> function in :numref:<code>more_on_order_and_divisibility</code>. There is also a version of <code>gcd</code> for the integers; we will return to a discussion of the relationship between different number systems below. There are even a generic <code>gcd</code> function and generic notions of <code>Prime</code> and <code>Coprime</code> that make sense in general classes of algebraic structures. We will come to understand how Lean manages this generality in the next chapter. In the meanwhile, in this section, we will restrict attention to the natural numbers.</p> <p>We also need the notion of a prime number, <code>Nat.Prime</code>. The theorem <code>Nat.prime_def_lt</code> provides one familiar characterization, and <code>Nat.Prime.eq_one_or_self_of_dvd</code> provides another.</p> <div class=highlight><pre><span></span><code><span class=k>#check</span><span class=w> </span><span class=n>Nat.prime_def_lt</span>

<span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>p</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℕ</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>prime_p</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Nat.Prime</span><span class=w> </span><span class=n>p</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=bp>∧</span><span class=w> </span><span class=bp>∀</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℕ</span><span class=o>,</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=bp>∣</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>rwa</span><span class=w> </span><span class=o>[</span><span class=n>Nat.prime_def_lt</span><span class=o>]</span><span class=w> </span><span class=n>at</span><span class=w> </span><span class=n>prime_p</span>

<span class=k>#check</span><span class=w> </span><span class=n>Nat.Prime.eq_one_or_self_of_dvd</span>

<span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>p</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℕ</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>prime_p</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Nat.Prime</span><span class=w> </span><span class=n>p</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=bp>∀</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℕ</span><span class=o>,</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=bp>∣</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=bp>∨</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=o>:=</span>
<span class=w>  </span><span class=n>prime_p.eq_one_or_self_of_dvd</span>

<span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Nat.Prime</span><span class=w> </span><span class=mi>17</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span><span class=w> </span><span class=n>norm_num</span>

<span class=c1>-- commonly used</span>
<span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Nat.Prime</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=o>:=</span>
<span class=w>  </span><span class=n>Nat.prime_two</span>

<span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Nat.Prime</span><span class=w> </span><span class=mi>3</span><span class=w> </span><span class=o>:=</span>
<span class=w>  </span><span class=n>Nat.prime_three</span>
</code></pre></div> <p>In the natural numbers, a prime number has the property that it cannot be written as a product of nontrivial factors. In a broader mathematical context, an element of a ring that has this property is said to be <em>irreducible</em>. An element of a ring is said to be <em>prime</em> if whenever it divides a product, it divides one of the factors. It is an important property of the natural numbers that in that setting the two notions coincide, giving rise to the theorem <code>Nat.Prime.dvd_mul</code>.</p> <p>We can use this fact to establish a key property in the argument above: if the square of a number is even, then that number is even as well. Mathlib defines the predicate <code>Even</code> in <code>Algebra.Group.Even</code>, but for reasons that will become clear below, we will simply use <code>2 ∣ m</code> to express that <code>m</code> is even.</p> <div class=highlight><pre><span></span><code><span class=k>#check</span><span class=w> </span><span class=n>Nat.Prime.dvd_mul</span>
<span class=k>#check</span><span class=w> </span><span class=n>Nat.Prime.dvd_mul</span><span class=w> </span><span class=n>Nat.prime_two</span>
<span class=k>#check</span><span class=w> </span><span class=n>Nat.prime_two.dvd_mul</span>

<span class=kd>theorem</span><span class=w> </span><span class=n>even_of_even_sqr</span><span class=w> </span><span class=o>{</span><span class=n>m</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℕ</span><span class=o>}</span><span class=w> </span><span class=o>(</span><span class=n>h</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>∣</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>∣</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=n>pow_two</span><span class=o>,</span><span class=w> </span><span class=n>Nat.prime_two.dvd_mul</span><span class=o>]</span><span class=w> </span><span class=n>at</span><span class=w> </span><span class=n>h</span>
<span class=w>  </span><span class=n>cases</span><span class=w> </span><span class=n>h</span><span class=w> </span><span class=bp>&lt;;&gt;</span><span class=w> </span><span class=n>assumption</span>

<span class=kd>example</span><span class=w> </span><span class=o>{</span><span class=n>m</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℕ</span><span class=o>}</span><span class=w> </span><span class=o>(</span><span class=n>h</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>∣</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>∣</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=o>:=</span>
<span class=w>  </span><span class=n>Nat.Prime.dvd_of_dvd_pow</span><span class=w> </span><span class=n>Nat.prime_two</span><span class=w> </span><span class=n>h</span>
</code></pre></div> <p>As we proceed, you will need to become proficient at finding the facts you need. Remember that if you can guess the prefix of the name and you have imported the relevant library, you can use tab completion (sometimes with <code>ctrl-tab</code>) to find what you are looking for. You can use <code>ctrl-click</code> on any identifier to jump to the file where it is defined, which enables you to browse definitions and theorems nearby. You can also use the search engine on the <a href=https://leanprover-community.github.io/ >Lean community web pages</a>, and if all else fails, don't hesitate to ask on <a href=https://leanprover.zulipchat.com/ >Zulip</a>.</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Nat</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>h</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>c</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>h&#39;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>≠</span><span class=w> </span><span class=mi>0</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>:=</span>
<span class=w>  </span><span class=c1>-- apply? suggests the following:</span>
<span class=w>  </span><span class=o>(</span><span class=n>mul_right_inj&#39;</span><span class=w> </span><span class=n>h&#39;</span><span class=o>)</span><span class=bp>.</span><span class=n>mp</span><span class=w> </span><span class=n>h</span>
</code></pre></div> <p>The heart of our proof of the irrationality of the square root of two is contained in the following theorem. See if you can fill out the proof sketch, using <code>even_of_even_sqr</code> and the theorem <code>Nat.dvd_gcd</code>.</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>{</span><span class=n>m</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℕ</span><span class=o>}</span><span class=w> </span><span class=o>(</span><span class=n>coprime_mn</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>m.Coprime</span><span class=w> </span><span class=n>n</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>≠</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>intro</span><span class=w> </span><span class=n>sqr_eq</span>
<span class=w>  </span><span class=k>have</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>∣</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>    </span><span class=gr>sorry</span>
<span class=w>  </span><span class=n>obtain</span><span class=w> </span><span class=o>⟨</span><span class=n>k</span><span class=o>,</span><span class=w> </span><span class=n>meq</span><span class=o>⟩</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=n>dvd_iff_exists_eq_mul_left.mp</span><span class=w> </span><span class=n>this</span>
<span class=w>  </span><span class=k>have</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=o>(</span><span class=mi>2</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>k</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=o>)</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>    </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=bp>←</span><span class=w> </span><span class=n>sqr_eq</span><span class=o>,</span><span class=w> </span><span class=n>meq</span><span class=o>]</span>
<span class=w>    </span><span class=n>ring</span>
<span class=w>  </span><span class=k>have</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>k</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=o>:=</span>
<span class=w>    </span><span class=gr>sorry</span>
<span class=w>  </span><span class=k>have</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>∣</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>    </span><span class=gr>sorry</span>
<span class=w>  </span><span class=k>have</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>∣</span><span class=w> </span><span class=n>m.gcd</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>    </span><span class=gr>sorry</span>
<span class=w>  </span><span class=k>have</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>∣</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>    </span><span class=gr>sorry</span>
<span class=w>    </span><span class=n>convert</span><span class=w> </span><span class=n>this</span>
<span class=w>  </span><span class=n>norm_num</span><span class=w> </span><span class=n>at</span><span class=w> </span><span class=n>this</span>
</code></pre></div> <p>In fact, with very few changes, we can replace <code>2</code> by an arbitrary prime. Give it a try in the next example. At the end of the proof, you'll need to derive a contradiction from <code>p ∣ 1</code>. You can use <code>Nat.Prime.two_le</code>, which says that any prime number is greater than or equal to two, and <code>Nat.le_of_dvd</code>.</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>{</span><span class=n>m</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℕ</span><span class=o>}</span><span class=w> </span><span class=o>(</span><span class=n>coprime_mn</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>m.Coprime</span><span class=w> </span><span class=n>n</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>prime_p</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>p.Prime</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>≠</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=gr>sorry</span>
</code></pre></div> <p>Let us consider another approach. Here is a quick proof that if <span class=arithmatex>\(p\)</span> is prime, then <span class=arithmatex>\(m^2 \ne p n^2\)</span>: if we assume <span class=arithmatex>\(m^2 = p n^2\)</span> and consider the factorization of <span class=arithmatex>\(m<code>and :math:</code>n\)</span> into primes, then <span class=arithmatex>\(p\)</span> occurs an even number of times on the left side of the equation and an odd number of times on the right, a contradiction. Note that this argument requires that <span class=arithmatex>\(n\)</span> and hence <span class=arithmatex>\(m\)</span> are not equal to zero. The formalization below confirms that this assumption is sufficient.</p> <p>The unique factorization theorem says that any natural number other than zero can be written as the product of primes in a unique way. Mathlib contains a formal version of this, expressed in terms of a function <code>Nat.factors</code>, which returns the list of prime factors of a number in nondecreasing order. The library proves that all the elements of <code>Nat.factors n</code> are prime, that any <code>n</code> greater than zero is equal to the product of its factors, and that if <code>n</code> is equal to the product of another list of prime numbers, then that list is a permutation of <code>Nat.factors n</code>.</p> <div class=highlight><pre><span></span><code><span class=k>#check</span><span class=w> </span><span class=n>Nat.factors</span>
<span class=k>#check</span><span class=w> </span><span class=n>Nat.prime_of_mem_factors</span>
<span class=k>#check</span><span class=w> </span><span class=n>Nat.prod_factors</span>
<span class=k>#check</span><span class=w> </span><span class=n>Nat.factors_unique</span>
</code></pre></div> <p>You can browse these theorems and others nearby, even though we have not talked about list membership, products, or permutations yet. We won't need any of that for the task at hand. We will instead use the fact that Mathlib has a function <code>Nat.factorization</code>, that represents the same data as a function. Specifically, <code>Nat.factorization n p</code>, which we can also write <code>n.factorization p</code>, returns the multiplicity of <code>p</code> in the prime factorization of <code>n</code>. We will use the following three facts.</p> <div class=highlight><pre><span></span><code><span class=kd>theorem</span><span class=w> </span><span class=n>factorization_mul&#39;</span><span class=w> </span><span class=o>{</span><span class=n>m</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℕ</span><span class=o>}</span><span class=w> </span><span class=o>(</span><span class=n>mnez</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=bp>≠</span><span class=w> </span><span class=mi>0</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>nnez</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=bp>≠</span><span class=w> </span><span class=mi>0</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>p</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℕ</span><span class=o>)</span><span class=w> </span><span class=o>:</span>
<span class=w>    </span><span class=o>(</span><span class=n>m</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>n</span><span class=o>)</span><span class=bp>.</span><span class=n>factorization</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>m.factorization</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>n.factorization</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=n>Nat.factorization_mul</span><span class=w> </span><span class=n>mnez</span><span class=w> </span><span class=n>nnez</span><span class=o>]</span>
<span class=w>  </span><span class=n>rfl</span>

<span class=kd>theorem</span><span class=w> </span><span class=n>factorization_pow&#39;</span><span class=w> </span><span class=o>(</span><span class=n>n</span><span class=w> </span><span class=n>k</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℕ</span><span class=o>)</span><span class=w> </span><span class=o>:</span>
<span class=w>    </span><span class=o>(</span><span class=n>n</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=n>k</span><span class=o>)</span><span class=bp>.</span><span class=n>factorization</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>k</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>n.factorization</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=n>Nat.factorization_pow</span><span class=o>]</span>
<span class=w>  </span><span class=n>rfl</span>

<span class=kd>theorem</span><span class=w> </span><span class=n>Nat.Prime.factorization&#39;</span><span class=w> </span><span class=o>{</span><span class=n>p</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℕ</span><span class=o>}</span><span class=w> </span><span class=o>(</span><span class=n>prime_p</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>p.Prime</span><span class=o>)</span><span class=w> </span><span class=o>:</span>
<span class=w>    </span><span class=n>p.factorization</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=n>prime_p.factorization</span><span class=o>]</span>
<span class=w>  </span><span class=n>simp</span>
</code></pre></div> <p>In fact, <code>n.factorization</code> is defined in Lean as a function of finite support, which explains the strange notation you will see as you step through the proofs above. Don't worry about this now. For our purposes here, we can use the three theorems above as a black box.</p> <p>The next example shows that the simplifier is smart enough to replace <code>n^2 ≠ 0</code> by <code>n ≠ 0</code>. The tactic <code>simpa</code> just calls <code>simp</code> followed by <code>assumption</code>.</p> <p>See if you can use the identities above to fill in the missing parts of the proof.</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>{</span><span class=n>m</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℕ</span><span class=o>}</span><span class=w> </span><span class=o>(</span><span class=n>nnz</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=bp>≠</span><span class=w> </span><span class=mi>0</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>prime_p</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>p.Prime</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>≠</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>intro</span><span class=w> </span><span class=n>sqr_eq</span>
<span class=w>  </span><span class=k>have</span><span class=w> </span><span class=n>nsqr_nez</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>≠</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span><span class=w> </span><span class=n>simpa</span>
<span class=w>  </span><span class=k>have</span><span class=w> </span><span class=n>eq1</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Nat.factorization</span><span class=w> </span><span class=o>(</span><span class=n>m</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=o>)</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>m.factorization</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>    </span><span class=gr>sorry</span>
<span class=w>  </span><span class=k>have</span><span class=w> </span><span class=n>eq2</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=o>(</span><span class=n>p</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=o>)</span><span class=bp>.</span><span class=n>factorization</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>n.factorization</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>    </span><span class=gr>sorry</span>
<span class=w>  </span><span class=k>have</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>m.factorization</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=bp>%</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=o>(</span><span class=mi>2</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>n.factorization</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=mi>1</span><span class=o>)</span><span class=w> </span><span class=bp>%</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>    </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=bp>←</span><span class=w> </span><span class=n>eq1</span><span class=o>,</span><span class=w> </span><span class=n>sqr_eq</span><span class=o>,</span><span class=w> </span><span class=n>eq2</span><span class=o>]</span>
<span class=w>  </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=n>add_comm</span><span class=o>,</span><span class=w> </span><span class=n>Nat.add_mul_mod_self_left</span><span class=o>,</span><span class=w> </span><span class=n>Nat.mul_mod_right</span><span class=o>]</span><span class=w> </span><span class=n>at</span><span class=w> </span><span class=n>this</span>
<span class=w>  </span><span class=n>norm_num</span><span class=w> </span><span class=n>at</span><span class=w> </span><span class=n>this</span>
</code></pre></div> <p>A nice thing about this proof is that it also generalizes. There is nothing special about <code>2</code>; with small changes, the proof shows that whenever we write <code>m^k = r * n^k</code>, the multiplicity of any prime <code>p</code> in <code>r</code> has to be a multiple of <code>k</code>.</p> <p>To use <code>Nat.count_factors_mul_of_pos</code> with <code>r * n^k</code>, we need to know that <code>r</code> is positive. But when <code>r</code> is zero, the theorem below is trivial, and easily proved by the simplifier. So the proof is carried out in cases. The line <code>rcases r with _ | r</code> replaces the goal with two versions: one in which <code>r</code> is replaced by <code>0</code>, and the other in which <code>r</code> is replaces by <code>r + 1</code>. In the second case, we can use the theorem <code>r.succ_ne_zero</code>, which establishes <code>r + 1 ≠ 0</code> (<code>succ</code> stands for successor).</p> <p>Notice also that the line that begins <code>have : npow_nz</code> provides a short proof-term proof of <code>n^k ≠ 0</code>. To understand how it works, try replacing it with a tactic proof, and then think about how the tactics describe the proof term.</p> <p>See if you can fill in the missing parts of the proof below. At the very end, you can use <code>Nat.dvd_sub'</code> and <code>Nat.dvd_mul_right</code> to finish it off.</p> <p>Note that this example does not assume that <code>p</code> is prime, but the conclusion is trivial when <code>p</code> is not prime since <code>r.factorization p</code> is then zero by definition, and the proof works in all cases anyway.</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>{</span><span class=n>m</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=n>k</span><span class=w> </span><span class=n>r</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℕ</span><span class=o>}</span><span class=w> </span><span class=o>(</span><span class=n>nnz</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=bp>≠</span><span class=w> </span><span class=mi>0</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>pow_eq</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=n>k</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>r</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=n>k</span><span class=o>)</span><span class=w> </span><span class=o>{</span><span class=n>p</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℕ</span><span class=o>}</span><span class=w> </span><span class=o>:</span>
<span class=w>    </span><span class=n>k</span><span class=w> </span><span class=bp>∣</span><span class=w> </span><span class=n>r.factorization</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>rcases</span><span class=w> </span><span class=n>r</span><span class=w> </span><span class=k>with</span><span class=w> </span><span class=n>_</span><span class=w> </span><span class=bp>|</span><span class=w> </span><span class=n>r</span>
<span class=w>  </span><span class=bp>·</span><span class=w> </span><span class=n>simp</span>
<span class=w>  </span><span class=k>have</span><span class=w> </span><span class=n>npow_nz</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=n>k</span><span class=w> </span><span class=bp>≠</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=k>fun</span><span class=w> </span><span class=n>npowz</span><span class=w> </span><span class=bp>↦</span><span class=w> </span><span class=n>nnz</span><span class=w> </span><span class=o>(</span><span class=n>pow_eq_zero</span><span class=w> </span><span class=n>npowz</span><span class=o>)</span>
<span class=w>  </span><span class=k>have</span><span class=w> </span><span class=n>eq1</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=o>(</span><span class=n>m</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=n>k</span><span class=o>)</span><span class=bp>.</span><span class=n>factorization</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>k</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>m.factorization</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>    </span><span class=gr>sorry</span>
<span class=w>  </span><span class=k>have</span><span class=w> </span><span class=n>eq2</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=o>((</span><span class=n>r</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=mi>1</span><span class=o>)</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=n>k</span><span class=o>)</span><span class=bp>.</span><span class=n>factorization</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=bp>=</span>
<span class=w>      </span><span class=n>k</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>n.factorization</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=o>(</span><span class=n>r</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=mi>1</span><span class=o>)</span><span class=bp>.</span><span class=n>factorization</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>    </span><span class=gr>sorry</span>
<span class=w>  </span><span class=k>have</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>r.succ.factorization</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>k</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>m.factorization</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=bp>-</span><span class=w> </span><span class=n>k</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>n.factorization</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>    </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=bp>←</span><span class=w> </span><span class=n>eq1</span><span class=o>,</span><span class=w> </span><span class=n>pow_eq</span><span class=o>,</span><span class=w> </span><span class=n>eq2</span><span class=o>,</span><span class=w> </span><span class=n>add_comm</span><span class=o>,</span><span class=w> </span><span class=n>Nat.add_sub_cancel</span><span class=o>]</span>
<span class=w>  </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=n>this</span><span class=o>]</span>
<span class=w>  </span><span class=gr>sorry</span>
</code></pre></div> <p>There are a number of ways in which we might want to improve on these results. To start with, a proof that the square root of two is irrational should say something about the square root of two, which can be understood as an element of the real or complex numbers. And stating that it is irrational should say something about the rational numbers, namely, that no rational number is equal to it. Moreover, we should extend the theorems in this section to the integers. Although it is mathematically obvious that if we could write the square root of two as a quotient of two integers then we could write it as a quotient of two natural numbers, proving this formally requires some effort.</p> <p>In Mathlib, the natural numbers, the integers, the rationals, the reals, and the complex numbers are represented by separate data types. Restricting attention to the separate domains is often helpful: we will see that it is easy to do induction on the natural numbers, and it is easiest to reason about divisibility of integers when the real numbers are not part of the picture. But having to mediate between the different domains is a headache, one we will have to contend with. We will return to this issue later in this chapter.</p> <p>We should also expect to be able to strengthen the conclusion of the last theorem to say that the number <code>r</code> is a <code>k</code>-th power, since its <code>k</code>-th root is just the product of each prime dividing <code>r</code> raised to its multiplicity in <code>r</code> divided by <code>k</code>. To be able to do that we will need better means for reasoning about products and sums over a finite set, which is also a topic we will return to.</p> <p>In fact, the results in this section are all established in much greater generality in Mathlib, in <code>Data.Real.Irrational</code>. The notion of <code>multiplicity</code> is defined for an arbitrary commutative monoid, and that it takes values in the extended natural numbers <code>enat</code>, which adds the value infinity to the natural numbers. In the next chapter, we will begin to develop the means to appreciate the way that Lean supports this sort of generality.</p> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.instant", "search.highlight", "search.share", "content.code.copy", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"alias": true, "default": "latest", "provider": "mike"}}</script> <script src=../../assets/javascripts/bundle.fe8b6f2b.min.js></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> </body> </html>