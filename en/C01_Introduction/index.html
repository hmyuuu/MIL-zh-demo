<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=../ rel=prev><link href=../C02_Basics/ rel=next><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.0, mkdocs-material-9.5.31"><title>Introduction - MIL</title><link rel=stylesheet href=../../assets/stylesheets/main.3cba04c6.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../assets/css/custom.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=green data-md-color-accent=light-green> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#introduction class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title=MIL class="md-header__button md-logo" aria-label=MIL data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> MIL </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Introduction </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/hmyuuu/MIL-zh-demo title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> MIL-zh-demo </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../ class=md-tabs__link> 目录 </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=./ class=md-tabs__link> Introduction </a> </li> <li class=md-tabs__item> <a href=../C02_Basics/ class=md-tabs__link> Basics </a> </li> <li class=md-tabs__item> <a href=../C03_Logic/ class=md-tabs__link> Logic </a> </li> <li class=md-tabs__item> <a href=../C04_Sets_and_Functions/ class=md-tabs__link> Sets and Functions </a> </li> <li class=md-tabs__item> <a href=../C05_Elementary_Number_Theory/ class=md-tabs__link> Elementary Number Theory </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title=MIL class="md-nav__button md-logo" aria-label=MIL data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> MIL </label> <div class=md-nav__source> <a href=https://github.com/hmyuuu/MIL-zh-demo title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> MIL-zh-demo </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> <span class=md-ellipsis> 目录 </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Introduction </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Introduction </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#getting-started class=md-nav__link> <span class=md-ellipsis> Getting Started </span> </a> </li> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../C02_Basics/ class=md-nav__link> <span class=md-ellipsis> Basics </span> </a> </li> <li class=md-nav__item> <a href=../C03_Logic/ class=md-nav__link> <span class=md-ellipsis> Logic </span> </a> </li> <li class=md-nav__item> <a href=../C04_Sets_and_Functions/ class=md-nav__link> <span class=md-ellipsis> Sets and Functions </span> </a> </li> <li class=md-nav__item> <a href=../C05_Elementary_Number_Theory/ class=md-nav__link> <span class=md-ellipsis> Elementary Number Theory </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#getting-started class=md-nav__link> <span class=md-ellipsis> Getting Started </span> </a> </li> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=introduction>Introduction<a class=headerlink href=#introduction title="Permanent link">&para;</a></h1> <h2 id=getting-started>Getting Started<a class=headerlink href=#getting-started title="Permanent link">&para;</a></h2> <p>The goal of this book is to teach you to formalize mathematics using the Lean 4 interactive proof assistant. It assumes that you know some mathematics, but it does not require much. Although we will cover examples ranging from number theory to measure theory and analysis, we will focus on elementary aspects of those fields, in the hopes that if they are not familiar to you, you can pick them up as you go. We also don't presuppose any background with formal methods. Formalization can be seen as a kind of computer programming: we will write mathematical definitions, theorems, and proofs in a regimented language, like a programming language, that Lean can understand. In return, Lean provides feedback and information, interprets expressions and guarantees that they are well-formed, and ultimately certifies the correctness of our proofs.</p> <p>You can learn more about Lean from the <a href=https://leanprover.github.io>Lean project page</a> and the <a href=https://leanprover-community.github.io/ >Lean community web pages</a>. This tutorial is based on Lean's large and ever-growing library, <em>Mathlib</em>. We also strongly recommend joining the <a href=https://leanprover.zulipchat.com/ >Lean Zulip online chat group</a> if you haven't already. You'll find a lively and welcoming community of Lean enthusiasts there, happy to answer questions and offer moral support.</p> <p>Although you can read a pdf or html version of this book online, it designed to be read interactively, running Lean from inside the VS Code editor. To get started:</p> <ol> <li> <p>Install Lean 4 and VS Code following these <a href=https://leanprover-community.github.io/get*started.html>installation instructions</a>.</p> </li> <li> <p>Make sure you have <a href=https://git-scm.com/ >git</a> installed.</p> </li> <li> <p>Follow these <a href=https://leanprover-community.github.io/install/project.html#working-on-an-existing-project>instructions</a> to fetch the <code>mathematics*in*lean</code> repository and open it up in VS Code.</p> </li> <li> <p>Each section in this book has an associated Lean file with examples and exercises. You can find them in the folder <code>MIL</code>, organized by chapter. We strongly recommend making a copy of that folder and experimenting and doing the exercises in that copy. This leaves the originals intact, and it also makes it easier to update the repository as it changes (see below). You can call the copy <code>my*files</code> or whatever you want and use it to create your own Lean files as well.</p> </li> </ol> <p>At that point, you can open the textbook in a side panel in VS Code as follows:</p> <ol> <li> <p>Type <code>ctrl-shift-P</code> (<code>command-shift-P</code> in macOS).</p> </li> <li> <p>Type <code>Lean 4: Open Documentation View</code> in the bar that appears, and then press return. (You can press return to select it as soon as it is highlighted in the menu.)</p> </li> <li> <p>In the window that opens, click on <code>Open documentation of current project</code>.</p> </li> </ol> <p>Alternatively, you can run Lean and VS Code in the cloud, using <a href=https://gitpod.io/ >Gitpod</a>. You can find instructions as to how to do that on the Mathematics in Lean <a href=https://github.com/leanprover-community/mathematics*in*lean>project page</a> on Github. We still recommend working in a copy of the <code>MIL</code> folder, as described above.</p> <p>This textbook and the associated repository are still a work in progress. You can update the repository by typing <code>git pull</code> followed by <code>lake exe cache get</code> inside the <code>mathematics*in*lean</code> folder. (This assumes that you have not changed the contents of the <code>MIL</code> folder, which is why we suggested making a copy.)</p> <p>We intend for you to work on the exercises in the <code>MIL</code> folder while reading the textbook, which contains explanations, instructions, and hints. The text will often include examples, like this one:</p> <div class=highlight><pre><span></span><code><span class=k>#eval</span><span class=w> </span><span class=s2>&quot;Hello, World!&quot;</span>
</code></pre></div> <p>You should be able to find the corresponding example in the associated Lean file. If you click on the line, VS Code will show you Lean's feedback in the <code>Lean Goal</code> window, and if you hover your cursor over the <code>#eval</code> command VS Code will show you Lean's response to this command in a pop-up window. You are encouraged to edit the file and try examples of your own.</p> <p>This book moreover provides lots of challenging exercises for you to try. Don't rush past these! Lean is about <em>doing</em> mathematics interactively, not just reading about it. Working through the exercises is central to the experience. You don't have to do all of them; when you feel comfortable that you have mastered the relevant skills, feel free to move on. You can always compare your solutions to the ones in the <code>solutions</code> folder associated with each section.</p> <h2 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">&para;</a></h2> <p>Put simply, Lean is a tool for building complex expressions in a formal language known as <em>dependent type theory</em>.</p> <p>.. index:: check, commands ; check</p> <p>Every expression has a <em>type</em>, and you can use the <code>#check</code> command to print it. Some expressions have types like <code>ℕ</code> or <code>ℕ → ℕ</code>. These are mathematical objects.</p> <div class=highlight><pre><span></span><code><span class=k>#check</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=mi>2</span>

<span class=kd>def</span><span class=w> </span><span class=n>f</span><span class=w> </span><span class=o>(</span><span class=n>x</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℕ</span><span class=o>)</span><span class=w> </span><span class=o>:=</span>
<span class=w>  </span><span class=n>x</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=mi>3</span>

<span class=k>#check</span><span class=w> </span><span class=n>f</span>
</code></pre></div> <p>Some expressions have type <code>Prop</code>. These are mathematical statements.</p> <div class=highlight><pre><span></span><code><span class=k>#check</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=mi>4</span>

<span class=kd>def</span><span class=w> </span><span class=n>FermatLastTheorem</span><span class=w> </span><span class=o>:=</span>
<span class=w>  </span><span class=bp>∀</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℕ</span><span class=o>,</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=bp>&gt;</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>∧</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=bp>≠</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=bp>≠</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=n>n</span>

<span class=k>#check</span><span class=w> </span><span class=n>FermatLastTheorem</span>
</code></pre></div> <p>Some expressions have a type, <code>P</code>, where <code>P</code> itself has type <code>Prop</code>. Such an expression is a proof of the proposition <code>P</code>.</p> <div class=highlight><pre><span></span><code><span class=kd>theorem</span><span class=w> </span><span class=n>easy</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=mi>4</span><span class=w> </span><span class=o>:=</span>
<span class=w>  </span><span class=n>rfl</span>

<span class=k>#check</span><span class=w> </span><span class=n>easy</span>

<span class=kd>theorem</span><span class=w> </span><span class=n>hard</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>FermatLastTheorem</span><span class=w> </span><span class=o>:=</span>
<span class=w>  </span><span class=gr>sorry</span>

<span class=k>#check</span><span class=w> </span><span class=n>hard</span>
</code></pre></div> <p>If you manage to construct an expression of type <code>FermatLastTheorem</code> and Lean accepts it as a term of that type, you have done something very impressive. (Using <code>sorry</code> is cheating, and Lean knows it.) So now you know the game. All that is left to learn are the rules.</p> <p>This book is complementary to a companion tutorial, <a href=https://leanprover.github.io/theorem*proving*in*lean4/ >Theorem Proving in Lean</a>, which provides a more thorough introduction to the underlying logical framework and core syntax of Lean. <em>Theorem Proving in Lean</em> is for people who prefer to read a user manual cover to cover before using a new dishwasher. If you are the kind of person who prefers to hit the <em>start</em> button and figure out how to activate the potscrubber feature later, it makes more sense to start here and refer back to <em>Theorem Proving in Lean</em> as necessary.</p> <p>Another thing that distinguishes <em>Mathematics in Lean</em> from <em>Theorem Proving in Lean</em> is that here we place a much greater emphasis on the use of <em>tactics</em>. Given that we are trying to build complex expressions, Lean offers two ways of going about it: we can write down the expressions themselves (that is, suitable text descriptions thereof), or we can provide Lean with <em>instructions</em> as to how to construct them. For example, the following expression represents a proof of the fact that if <code>n</code> is even then so is <code>m * n</code>:</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=bp>∀</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Nat</span><span class=o>,</span><span class=w> </span><span class=n>Even</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>Even</span><span class=w> </span><span class=o>(</span><span class=n>m</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>n</span><span class=o>)</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=k>fun</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>⟨</span><span class=n>k</span><span class=o>,</span><span class=w> </span><span class=o>(</span><span class=n>hk</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>k</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>k</span><span class=o>)⟩</span><span class=w> </span><span class=bp>↦</span>
<span class=w>  </span><span class=k>have</span><span class=w> </span><span class=n>hmn</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>k</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>k</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span><span class=w> </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=n>hk</span><span class=o>,</span><span class=w> </span><span class=n>mul</span><span class=bp>*</span><span class=n>add</span><span class=o>]</span>
<span class=w>  </span><span class=k>show</span><span class=w> </span><span class=bp>∃</span><span class=w> </span><span class=n>l</span><span class=o>,</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=bp>\*</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>l</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>l</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=o>⟨</span><span class=bp>\*</span><span class=o>,</span><span class=w> </span><span class=n>hmn</span><span class=o>⟩</span>
</code></pre></div> <p>The <em>proof term</em> can be compressed to a single line:</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=bp>∀</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Nat</span><span class=o>,</span><span class=w> </span><span class=n>Even</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>Even</span><span class=w> </span><span class=o>(</span><span class=n>m</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>n</span><span class=o>)</span><span class=w> </span><span class=o>:=</span>
<span class=k>fun</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>⟨</span><span class=n>k</span><span class=o>,</span><span class=w> </span><span class=n>hk</span><span class=o>⟩</span><span class=w> </span><span class=bp>↦</span><span class=w> </span><span class=o>⟨</span><span class=n>m</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>k</span><span class=o>,</span><span class=w> </span><span class=kd>by</span><span class=w> </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=n>hk</span><span class=o>,</span><span class=w> </span><span class=n>mul</span><span class=bp>*</span><span class=n>add</span><span class=o>]⟩</span>
</code></pre></div> <p>The following is, instead, a <em>tactic-style</em> proof of the same theorem, where lines starting with <code>--</code> are comments, hence ignored by Lean:</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=bp>∀</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Nat</span><span class=o>,</span><span class=w> </span><span class=n>Even</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>Even</span><span class=w> </span><span class=o>(</span><span class=n>m</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>n</span><span class=o>)</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=c1>-- Say m and n are natural numbers, and assume n=2*k.</span>
<span class=w>  </span><span class=n>rintro</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>⟨</span><span class=n>k</span><span class=o>,</span><span class=w> </span><span class=n>hk</span><span class=o>⟩</span>
<span class=w>  </span><span class=c1>-- We need to prove m*n is twice a natural number. Let&#39;s show it&#39;s twice m*k.</span>
<span class=w>  </span><span class=n>use</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=bp>\*</span><span class=w> </span><span class=n>k</span>
<span class=w>  </span><span class=c1>-- Substitute for n,</span>
<span class=w>  </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=n>hk</span><span class=o>]</span>
<span class=w>  </span><span class=c1>-- and now it&#39;s obvious.</span>
<span class=w>  </span><span class=n>ring</span>
</code></pre></div> <p>As you enter each line of such a proof in VS Code, Lean displays the <em>proof state</em> in a separate window, telling you what facts you have already established and what tasks remain to prove your theorem. You can replay the proof by stepping through the lines, since Lean will continue to show you the state of the proof at the point where the cursor is. In this example, you will then see that the first line of the proof introduces <code>m</code> and <code>n</code> (we could have renamed them at that point, if we wanted to), and also decomposes the hypothesis <code>Even n</code> to a <code>k</code> and the assumption that <code>n = 2 * k</code>. The second line, <code>use m * k</code>, declares that we are going to show that <code>m * n</code> is even by showing <code>m * n = 2 * (m * k)</code>. The next line uses the <code>rewrite</code> tactic to replace <code>n</code> by <code>2 * k</code> in the goal, and the <code>ring</code> tactic solves the resulting goal <code>m * (2 * k) = 2 * (m * k)</code>.</p> <p>The ability to build a proof in small steps with incremental feedback is extremely powerful. For that reason, tactic proofs are often easier and quicker to write than proof terms. There isn't a sharp distinction between the two: tactic proofs can be inserted in proof terms, as we did with the phrase <code>by rw [hk, mul*add]</code> in the example above. We will also see that, conversely, it is often useful to insert a short proof term in the middle of a tactic proof. That said, in this book, our emphasis will be on the use of tactics.</p> <p>In our example, the tactic proof can also be reduced to a one-liner:</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=bp>∀</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Nat</span><span class=o>,</span><span class=w> </span><span class=n>Even</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>Even</span><span class=w> </span><span class=o>(</span><span class=n>m</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>n</span><span class=o>)</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>rintro</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>⟨</span><span class=n>k</span><span class=o>,</span><span class=w> </span><span class=n>hk</span><span class=o>⟩</span><span class=bp>;</span><span class=w> </span><span class=n>use</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>k</span><span class=bp>;</span><span class=w> </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=n>hk</span><span class=o>]</span><span class=bp>;</span><span class=w> </span><span class=n>ring</span>
</code></pre></div> <p>Here we have used tactics to carry out small proof steps. But they can also provide substantial automation, and justify longer calculations and bigger inferential steps. For example, we can invoke Lean's simplifier with specific rules for simplifying statements about parity to prove our theorem automatically.</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=bp>∀</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Nat</span><span class=o>,</span><span class=w> </span><span class=n>Even</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>Even</span><span class=w> </span><span class=o>(</span><span class=n>m</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>n</span><span class=o>)</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>intros</span><span class=bp>;</span><span class=w> </span><span class=n>simp</span><span class=w> </span><span class=o>[</span><span class=bp>*</span><span class=o>,</span><span class=w> </span><span class=n>parity</span><span class=bp>*</span><span class=n>simps</span><span class=o>]</span>
</code></pre></div> <p>Another big difference between the two introductions is that <em>Theorem Proving in Lean</em> depends only on core Lean and its built-in tactics, whereas <em>Mathematics in Lean</em> is built on top of Lean's powerful and ever-growing library, <em>Mathlib</em>. As a result, we can show you how to use some of the mathematical objects and theorems in the library, and some of the very useful tactics. This book is not meant to be used as an complete overview of the library; the <a href=https://leanprover-community.github.io/ >community</a> web pages contain extensive documentation. Rather, our goal is to introduce you to the style of thinking that underlies that formalization, and point out basic entry points so that you are comfortable browsing the library and finding things on your own.</p> <p>Interactive theorem proving can be frustrating, and the learning curve is steep. But the Lean community is very welcoming to newcomers, and people are available on the <a href=https://leanprover.zulipchat.com/ >Lean Zulip chat group</a> round the clock to answer questions. We hope to see you there, and have no doubt that soon enough you, too, will be able to answer such questions and contribute to the development of <em>Mathlib</em>.</p> <p>So here is your mission, should you choose to accept it: dive in, try the exercises, come to Zulip with questions, and have fun. But be forewarned: interactive theorem proving will challenge you to think about mathematics and mathematical reasoning in fundamentally new ways. Your life may never be the same.</p> <p><em>Acknowledgments.</em> We are grateful to Gabriel Ebner for setting up the infrastructure for running this tutorial in VS Code, and to Scott Morrison and Mario Carneiro for help porting it from Lean 4. We are also grateful for help and corrections from Takeshi Abe, Julian Berman, Alex Best, Bulwi Cha, Bryan Gin-ge Chen, Steven Clontz, Mauricio Collaris, Johan Commelin, Mark Czubin, Alexandru Duca, Denis Gorbachev, Winston de Greef, Mathieu Guay-Paquet, Julian Külshammer, Martin C. Martin, Giovanni Mascellani, Isaiah Mindich, Hunter Monroe, Pietro Monticone, Oliver Nash, Bartosz Piotrowski, Nicolas Rolland, Keith Rush, Guilherme Silva, Pedro Sánchez Terraf, Floris van Doorn, and Eric Wieser. Our work has been partially supported by the Hoskinson Center for Formal Mathematics.</p> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.instant", "search.highlight", "search.share", "content.code.copy", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"alias": true, "default": "latest", "provider": "mike"}}</script> <script src=../../assets/javascripts/bundle.fe8b6f2b.min.js></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> </body> </html>