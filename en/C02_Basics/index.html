<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=../C01_Introduction/ rel=prev><link href=../C03_Logic/ rel=next><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.0, mkdocs-material-9.5.31"><title>Basics - MIL</title><link rel=stylesheet href=../../assets/stylesheets/main.3cba04c6.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../assets/css/custom.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=green data-md-color-accent=light-green> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#basics class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title=MIL class="md-header__button md-logo" aria-label=MIL data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> MIL </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Basics </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/hmyuuu/MIL-zh-demo title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> MIL-zh-demo </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../ class=md-tabs__link> 目录 </a> </li> <li class=md-tabs__item> <a href=../C01_Introduction/ class=md-tabs__link> Introduction </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=./ class=md-tabs__link> Basics </a> </li> <li class=md-tabs__item> <a href=../C03_Logic/ class=md-tabs__link> Logic </a> </li> <li class=md-tabs__item> <a href=../C04_Sets_and_Functions/ class=md-tabs__link> Sets and Functions </a> </li> <li class=md-tabs__item> <a href=../C05_Elementary_Number_Theory/ class=md-tabs__link> Elementary Number Theory </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title=MIL class="md-nav__button md-logo" aria-label=MIL data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> MIL </label> <div class=md-nav__source> <a href=https://github.com/hmyuuu/MIL-zh-demo title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> MIL-zh-demo </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> <span class=md-ellipsis> 目录 </span> </a> </li> <li class=md-nav__item> <a href=../C01_Introduction/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Basics </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Basics </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#calculating class=md-nav__link> <span class=md-ellipsis> Calculating </span> </a> </li> <li class=md-nav__item> <a href=#proving-identities-in-algebraic-structures class=md-nav__link> <span class=md-ellipsis> Proving Identities in Algebraic Structures </span> </a> </li> <li class=md-nav__item> <a href=#using-theorems-and-lemmas class=md-nav__link> <span class=md-ellipsis> Using Theorems and Lemmas </span> </a> </li> <li class=md-nav__item> <a href=#more-examples-using-apply-and-rw class=md-nav__link> <span class=md-ellipsis> More examples using apply and rw </span> </a> </li> <li class=md-nav__item> <a href=#proving-facts-about-algebraic-structures class=md-nav__link> <span class=md-ellipsis> Proving Facts about Algebraic Structures </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../C03_Logic/ class=md-nav__link> <span class=md-ellipsis> Logic </span> </a> </li> <li class=md-nav__item> <a href=../C04_Sets_and_Functions/ class=md-nav__link> <span class=md-ellipsis> Sets and Functions </span> </a> </li> <li class=md-nav__item> <a href=../C05_Elementary_Number_Theory/ class=md-nav__link> <span class=md-ellipsis> Elementary Number Theory </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#calculating class=md-nav__link> <span class=md-ellipsis> Calculating </span> </a> </li> <li class=md-nav__item> <a href=#proving-identities-in-algebraic-structures class=md-nav__link> <span class=md-ellipsis> Proving Identities in Algebraic Structures </span> </a> </li> <li class=md-nav__item> <a href=#using-theorems-and-lemmas class=md-nav__link> <span class=md-ellipsis> Using Theorems and Lemmas </span> </a> </li> <li class=md-nav__item> <a href=#more-examples-using-apply-and-rw class=md-nav__link> <span class=md-ellipsis> More examples using apply and rw </span> </a> </li> <li class=md-nav__item> <a href=#proving-facts-about-algebraic-structures class=md-nav__link> <span class=md-ellipsis> Proving Facts about Algebraic Structures </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=basics>Basics<a class=headerlink href=#basics title="Permanent link">&para;</a></h1> <p>This chapter is designed to introduce you to the nuts and bolts of mathematical reasoning in Lean: calculating, applying lemmas and theorems, and reasoning about generic structures.</p> <h2 id=calculating>Calculating<a class=headerlink href=#calculating title="Permanent link">&para;</a></h2> <p>We generally learn to carry out mathematical calculations without thinking of them as proofs. But when we justify each step in a calculation, as Lean requires us to do, the net result is a proof that the left-hand side of the calculation is equal to the right-hand side.</p> <p>In Lean, stating a theorem is tantamount to stating a goal, namely, the goal of proving the theorem. Lean provides the rewriting tactic <code>rw</code>, to replace the left-hand side of an identity by the right-hand side in the goal. If <code>a</code>, <code>b</code>, and <code>c</code> are real numbers, <code>mul_assoc a b c</code> is the identity <code>a * b * c = a * (b * c)</code> and <code>mul_comm a b</code> is the identity <code>a * b = b * a</code>. Lean provides automation that generally eliminates the need to refer the facts like these explicitly, but they are useful for the purposes of illustration. In Lean, multiplication associates to the left, so the left-hand side of <code>mul_assoc</code> could also be written <code>(a * b) * c</code>. However, it is generally good style to be mindful of Lean's notational conventions and leave out parentheses when Lean does as well.</p> <p>Let's try out <code>rw</code>.</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℝ</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>c</span><span class=o>)</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=n>mul_comm</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=o>]</span>
<span class=w>  </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=n>mul_assoc</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>c</span><span class=o>]</span>
</code></pre></div> <p>The <code>import</code> lines at the beginning of the associated examples file import the theory of the real numbers from Mathlib, as well as useful automation. For the sake of brevity, we generally suppress information like this in the textbook.</p> <p>You are welcome to make changes to see what happens. You can type the <code>ℝ</code> character as <code>\R</code> or <code>\real</code> in VS Code. The symbol doesn't appear until you hit space or the tab key. If you hover over a symbol when reading a Lean file, VS Code will show you the syntax that can be used to enter it. If you are curious to see all available abbreviations, you can hit Ctrl-Shift-P and then type abbreviations to get access to the <code>Lean 4: Show all abbreviations</code> command. If your keyboard does not have an easily accessible backslash, you can change the leading character by changing the <code>lean4.input.leader</code> setting.</p> <p>When a cursor is in the middle of a tactic proof, Lean reports on the current <em>proof state</em> in the <em>Lean Infoview</em> window. As you move your cursor past each step of the proof, you can see the state change. A typical proof state in Lean might look as follows:</p> <div class=highlight><pre><span></span><code><span class=mi>1</span><span class=w> </span><span class=n>goal</span>
<span class=n>x</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℕ</span><span class=o>,</span>
<span class=n>h₁</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Prime</span><span class=w> </span><span class=n>x</span><span class=o>,</span>
<span class=n>h₂</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=bp>¬</span><span class=n>Even</span><span class=w> </span><span class=n>x</span><span class=o>,</span>
<span class=n>h₃</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>&gt;</span><span class=w> </span><span class=n>x</span>
<span class=bp>⊢</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>≥</span><span class=w> </span><span class=mi>4</span>
</code></pre></div> <p>The lines before the one* that begins with <code>⊢</code> denote the _context*: they are the objects and assumptions currently at play. In this example, these include two objects, <code>x</code> and <code>y</code>, each a natural number. They also include three assumptions, labelled <code>h₁</code>, <code>h₂</code>, and <code>h₃</code>. In Lean, everything in a context is labelled with an identifier. You can type these subscripted labels as <code>h\1</code>, <code>h\2</code>, and <code>h\3</code>, but any legal identifiers would do: you can use <code>h1</code>, <code>h2</code>, <code>h3</code> instead, or <code>foo</code>, <code>bar</code>, and <code>baz</code>. The last line represents the <em>goal</em>, that is, the fact to be proved. Sometimes people use <em>target</em> for the fact to be proved, and <em>goal</em> for the combination of the context and the target. In practice, the intended meaning is usually clear.</p> <p>Try proving these identities, in each case replacing <code>sorry</code> by a tactic proof. With the <code>rw</code> tactic, you can use a left arrow (<code>\l</code>) to reverse an identity. For example, <code>rw [← mul_assoc a b c]</code> replaces <code>a * (b * c)</code> by <code>a * b * c</code> in the current goal. Note that the left-pointing arrow refers to going from right to left in the identity provided by <code>mul_assoc</code>, it has nothing to do with the left or right side of the goal.</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℝ</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>c</span><span class=o>)</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=gr>sorry</span>

<span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℝ</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=o>(</span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>c</span><span class=o>)</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>c</span><span class=o>)</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=gr>sorry</span>
</code></pre></div> <p>You can also use identities like <code>mul_assoc</code> and <code>mul_comm</code> without arguments. In this case, the rewrite tactic tries to match the left-hand side with an expression in the goal, using the first pattern it finds.</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℝ</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=n>mul_assoc</span><span class=o>]</span>
<span class=w>  </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=n>mul_comm</span><span class=o>]</span>
</code></pre></div> <p>You can also provide <em>partial</em> information. For example, <code>mul_comm a</code> matches any pattern of the form <code>a * ?</code> and rewrites it to <code>? * a</code>. Try doing the first of these examples without providing any arguments at all, and the second with only one argument.</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℝ</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=o>(</span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>c</span><span class=o>)</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=o>(</span><span class=n>c</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=o>)</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=gr>sorry</span>

<span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℝ</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=o>(</span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>c</span><span class=o>)</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>c</span><span class=o>)</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=gr>sorry</span>
</code></pre></div> <p>You can also use <code>rw</code> with facts from the local context.</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=n>d</span><span class=w> </span><span class=n>e</span><span class=w> </span><span class=n>f</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℝ</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>h</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>d</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>h&#39;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>e</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>f</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=o>(</span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>e</span><span class=o>)</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=o>(</span><span class=n>d</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>f</span><span class=o>)</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=n>h&#39;</span><span class=o>]</span>
<span class=w>  </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=bp>←</span><span class=w> </span><span class=n>mul_assoc</span><span class=o>]</span>
<span class=w>  </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=n>h</span><span class=o>]</span>
<span class=w>  </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=n>mul_assoc</span><span class=o>]</span>
</code></pre></div> <p>Try these, using the theorem <code>sub_self</code> for the second one:</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=n>d</span><span class=w> </span><span class=n>e</span><span class=w> </span><span class=n>f</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℝ</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>h</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>e</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>f</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>d</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>e</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>f</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>d</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=gr>sorry</span>

<span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=n>d</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℝ</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>hyp</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>-</span><span class=w> </span><span class=n>d</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>hyp&#39;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>d</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=gr>sorry</span>
</code></pre></div> <p>Multiple rewrite commands can be carried out with a single command, by listing the relevant identities separated by commas inside the square brackets.</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=n>d</span><span class=w> </span><span class=n>e</span><span class=w> </span><span class=n>f</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℝ</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>h</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>d</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>h&#39;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>e</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>f</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=o>(</span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>e</span><span class=o>)</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=o>(</span><span class=n>d</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>f</span><span class=o>)</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=n>h&#39;</span><span class=o>,</span><span class=w> </span><span class=bp>←</span><span class=w> </span><span class=n>mul_assoc</span><span class=o>,</span><span class=w> </span><span class=n>h</span><span class=o>,</span><span class=w> </span><span class=n>mul_assoc</span><span class=o>]</span>
</code></pre></div> <p>You still see the incremental progress by placing the cursor after a comma in any list of rewrites.</p> <p>Another trick is that we can declare variables once and for all outside an example or theorem. Lean then includes them automatically.</p> <div class=highlight><pre><span></span><code><span class=kd>variable</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=n>d</span><span class=w> </span><span class=n>e</span><span class=w> </span><span class=n>f</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℝ</span><span class=o>)</span>

<span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>h</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>d</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>h&#39;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>e</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>f</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=o>(</span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>e</span><span class=o>)</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=o>(</span><span class=n>d</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>f</span><span class=o>)</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=n>h&#39;</span><span class=o>,</span><span class=w> </span><span class=bp>←</span><span class=w> </span><span class=n>mul_assoc</span><span class=o>,</span><span class=w> </span><span class=n>h</span><span class=o>,</span><span class=w> </span><span class=n>mul_assoc</span><span class=o>]</span>
</code></pre></div> <p>Inspection of the tactic state at the beginning of the above proof reveals that Lean indeed included all variables. We can delimit the scope of the declaration by putting it in a <code>section ... end</code> block. Finally, recall from the introduction that Lean provides us with a command to determine the type of an expression:</p> <div class=highlight><pre><span></span><code><span class=kn>section</span>
<span class=kd>variable</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℝ</span><span class=o>)</span>

<span class=k>#check</span><span class=w> </span><span class=n>a</span>
<span class=k>#check</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℝ</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=n>mul_comm</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>b</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>mul_comm</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=n>mul_assoc</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>b</span>
<span class=k>#check</span><span class=w> </span><span class=n>mul_comm</span><span class=w> </span><span class=n>a</span>
<span class=k>#check</span><span class=w> </span><span class=n>mul_comm</span>

<span class=kd>end</span>
</code></pre></div> <p>The <code>#check</code> command works for both objects and facts. In response to the command <code>#check a</code>, Lean reports that <code>a</code> has type <code>ℝ</code>. In response to the command <code>#check mul_comm a b</code>, Lean reports that <code>mul_comm a b</code> is a proof of the fact <code>a * b = b * a</code>. The command <code>#check (a : ℝ)</code> states our expectation that the type of <code>a</code> is <code>ℝ</code>, and Lean will raise an error if that is not the case. We will explain the output of the last three <code>#check</code> commands later, but in the meanwhile, you can take a look at them, and experiment with some <code>#check</code> commands of your own.</p> <p>Let's try some more examples. The theorem <code>two_mul a</code> says that <code>2 * a = a + a</code>. The theorems <code>add_mul</code> and <code>mul_add</code> express the distributivity of multiplication over addition, and the theorem <code>add_assoc</code> expresses the associativity of addition. Use the <code>#check</code> command to see the precise statements.</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=n>mul_add</span><span class=o>,</span><span class=w> </span><span class=n>add_mul</span><span class=o>,</span><span class=w> </span><span class=n>add_mul</span><span class=o>]</span>
<span class=w>  </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=bp>←</span><span class=w> </span><span class=n>add_assoc</span><span class=o>,</span><span class=w> </span><span class=n>add_assoc</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=o>)]</span>
<span class=w>  </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=n>mul_comm</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>a</span><span class=o>,</span><span class=w> </span><span class=bp>←</span><span class=w> </span><span class=n>two_mul</span><span class=o>]</span>
</code></pre></div> <p>Whereas it is possible to figure out what it going on in this proof by stepping through it in the editor, it is hard to read on its own. Lean provides a more structured way of writing proofs like this using the <code>calc</code> keyword.</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>:=</span>
<span class=w>  </span><span class=k>calc</span>
<span class=w>    </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>      </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=n>mul_add</span><span class=o>,</span><span class=w> </span><span class=n>add_mul</span><span class=o>,</span><span class=w> </span><span class=n>add_mul</span><span class=o>]</span>
<span class=w>    </span><span class=bp>*</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=o>(</span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>      </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=bp>←</span><span class=w> </span><span class=n>add_assoc</span><span class=o>,</span><span class=w> </span><span class=n>add_assoc</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=o>)]</span>
<span class=w>    </span><span class=bp>*</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>      </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=n>mul_comm</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>a</span><span class=o>,</span><span class=w> </span><span class=bp>←</span><span class=w> </span><span class=n>two_mul</span><span class=o>]</span>
</code></pre></div> <p>Notice that the proof does <em>not</em> begin with <code>by</code>: an expression that begins with <code>calc</code> is a <em>proof term</em>. A <code>calc</code> expression can also be used inside a tactic proof, but Lean interprets it as the instruction to use the resulting proof term to solve the goal. The <code>calc</code> syntax is finicky: the underscores and justification have to be in the format indicated above. Lean uses indentation to determine things like where a block of tactics or a <code>calc</code> block begins and ends; try changing the indentation in the proof above to see what happens.</p> <p>one way to write a <code>calc</code> proof is to outline it first using the <code>sorry</code> tactic for justification, make sure Lean accepts the expression modulo these, and then justify the individual steps using tactics.</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>:=</span>
<span class=w>  </span><span class=k>calc</span>
<span class=w>    </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>      </span><span class=gr>sorry</span>
<span class=w>    </span><span class=bp>*</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=o>(</span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>      </span><span class=gr>sorry</span>
<span class=w>    </span><span class=bp>*</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>      </span><span class=gr>sorry</span>
</code></pre></div> <p>Try proving the following identity using both a pure <code>rw</code> proof and a more structured <code>calc</code> proof:</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=o>(</span><span class=n>c</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>d</span><span class=o>)</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>d</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>d</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=gr>sorry</span>
</code></pre></div> <p>The following exercise is a little more challenging. You can use the theorems listed underneath.</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℝ</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>-</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>-</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=gr>sorry</span>

<span class=k>#check</span><span class=w> </span><span class=n>pow_two</span><span class=w> </span><span class=n>a</span>
<span class=k>#check</span><span class=w> </span><span class=n>mul_sub</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>c</span>
<span class=k>#check</span><span class=w> </span><span class=n>add_mul</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>c</span>
<span class=k>#check</span><span class=w> </span><span class=n>add_sub</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>c</span>
<span class=k>#check</span><span class=w> </span><span class=n>sub_sub</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>c</span>
<span class=k>#check</span><span class=w> </span><span class=n>add_zero</span><span class=w> </span><span class=n>a</span>
</code></pre></div> <p>We can also perform rewriting in an assumption in the context. For example, <code>rw [mul_comm a b] at hyp</code> replaces <code>a * b</code> by <code>b * a</code> in the assumption <code>hyp</code>.</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=n>d</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℝ</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>hyp</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>d</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>hyp&#39;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>d</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>d</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=n>hyp&#39;</span><span class=o>]</span><span class=w> </span><span class=n>at</span><span class=w> </span><span class=n>hyp</span>
<span class=w>  </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=n>mul_comm</span><span class=w> </span><span class=n>d</span><span class=w> </span><span class=n>a</span><span class=o>]</span><span class=w> </span><span class=n>at</span><span class=w> </span><span class=n>hyp</span>
<span class=w>  </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=bp>←</span><span class=w> </span><span class=n>two_mul</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>d</span><span class=o>)]</span><span class=w> </span><span class=n>at</span><span class=w> </span><span class=n>hyp</span>
<span class=w>  </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=bp>←</span><span class=w> </span><span class=n>mul_assoc</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>d</span><span class=o>]</span><span class=w> </span><span class=n>at</span><span class=w> </span><span class=n>hyp</span>
<span class=w>  </span><span class=n>exact</span><span class=w> </span><span class=n>hyp</span>
</code></pre></div> <p>In the last step, the <code>exact</code> tactic can use <code>hyp</code> to solve the goal because at that point <code>hyp</code> matches the goal exactly.</p> <p>We close this section by noting that Mathlib provides a useful bit of automation with a <code>ring</code> tactic, which is designed to prove identities in any commutative ring as long as they follow purely from the ring axioms, without using any local assumption. ring</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>c</span><span class=o>)</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>ring</span>
<span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>ring</span>

<span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>-</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>-</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>ring</span>

<span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>hyp</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>d</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>hyp&#39;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>d</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>d</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=n>hyp</span><span class=o>,</span><span class=w> </span><span class=n>hyp&#39;</span><span class=o>]</span>
<span class=w>  </span><span class=n>ring</span>
</code></pre></div> <p>The <code>ring</code> tactic is imported indirectly when we import <code>Mathlib.Data.Real.Basic</code>, but we will see in the next section that it can be used for calculations on structures other than the real numbers. It can be imported explicitly with the command <code>import Mathlib.Tactic</code>. We will see there are similar tactics for other common kind of algebraic structures.</p> <p>There is a variation of <code>rw</code> called <code>nth_rw</code> that allows you to replace only particular instances of an expression in the goal. Possible matches are enumerated starting with 1, so in the following example, <code>nth_rw 2 [h]</code> replaces the second occurrence of <code>a + b</code> with <code>c</code>.</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℕ</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>h</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>c</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>nth_rw</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=o>[</span><span class=n>h</span><span class=o>]</span>
<span class=w>  </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=n>add_mul</span><span class=o>]</span>
</code></pre></div> <h2 id=proving-identities-in-algebraic-structures>Proving Identities in Algebraic Structures<a class=headerlink href=#proving-identities-in-algebraic-structures title="Permanent link">&para;</a></h2> <p>Mathematically, a ring consists of a collection of objects, <span class=arithmatex>\(R\)</span>, operations <span class=arithmatex>\(+\)</span> <span class=arithmatex>\(\times\)</span>, and constants <span class=arithmatex>\(0\)</span> and <span class=arithmatex>\(1\)</span>, and an operation <span class=arithmatex>\(x \to -x\)</span> such that:</p> <ul> <li> <p><span class=arithmatex>\(R\)</span> with <span class=arithmatex>\(+\)</span> is an <em>abelian group</em>, with <span class=arithmatex>\(0\)</span> as the additive identity and negation as inverse.</p> </li> <li> <p>Multiplication is associative with identity <span class=arithmatex>\(1\)</span>, and multiplication distributes over addition.</p> </li> </ul> <p>In Lean, the collection of objects is represented as a <em>type</em>, <code>R</code>. The ring axioms are as follows:</p> <div class=highlight><pre><span></span><code><span class=kd>variable</span><span class=w> </span><span class=o>(</span><span class=n>R</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kt>Type</span><span class=w> </span><span class=bp>*</span><span class=o>)</span><span class=w> </span><span class=o>[</span><span class=n>Ring</span><span class=w> </span><span class=n>R</span><span class=o>]</span>

<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>add_assoc</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=bp>∀</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>R</span><span class=o>,</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=o>(</span><span class=n>b</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>c</span><span class=o>))</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>add_comm</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=bp>∀</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>R</span><span class=o>,</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>a</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>zero_add</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=bp>∀</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>R</span><span class=o>,</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>add_left_neg</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=bp>∀</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>R</span><span class=o>,</span><span class=w> </span><span class=bp>-</span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=mi>0</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>mul_assoc</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=bp>∀</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>R</span><span class=o>,</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=o>(</span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>c</span><span class=o>))</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>mul_one</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=bp>∀</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>R</span><span class=o>,</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>one_mul</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=bp>∀</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>R</span><span class=o>,</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>mul_add</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=bp>∀</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>R</span><span class=o>,</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=o>(</span><span class=n>b</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>c</span><span class=o>)</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>c</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>add_mul</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=bp>∀</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>R</span><span class=o>,</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>c</span><span class=o>)</span>
</code></pre></div> <p>You will learn more about the square brackets in the first line later, but for the time being, suffice it to say that the declaration gives us a type, <code>R</code>, and a ring structure on <code>R</code>. Lean then allows us to use generic ring notation with elements of <code>R</code>, and to make use of a library of theorems about rings.</p> <p>The names of some of the theorems should look familiar: they are exactly the ones we used to calculate with the real numbers in the last section. Lean is good not only for proving things about concrete mathematical structures like the natural numbers and the integers, but also for proving things about abstract structures, characterized axiomatically, like rings. Moreover, Lean supports <em>generic reasoning</em> about both abstract and concrete structures, and can be trained to recognize appropriate instances. So any theorem about rings can be applied to concrete rings like the integers, <code>ℤ</code>, the rational numbers, <code>ℚ</code>, and the complex numbers <code>ℂ</code>. It can also be applied to any instance of an abstract structure that extends rings, such as any ordered ring or any field.</p> <p>Not all important properties of the real numbers hold in an arbitrary ring, however. For example, multiplication on the real numbers is commutative, but that does not hold in general. If you have taken a course in linear algebra, you will recognize that, for every <span class=arithmatex>\(n\)</span>, the <span class=arithmatex>\(n\)</span> by <span class=arithmatex>\(n\)</span> matrices of real numbers form a ring in which commutativity usually fails. If we declare <code>R</code> to be a <em>commutative</em> ring, in fact, all the theorems in the last section continue to hold when we replace <code>ℝ</code> by <code>R</code>.</p> <div class=highlight><pre><span></span><code><span class=kd>variable</span><span class=w> </span><span class=o>(</span><span class=n>R</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kt>Type</span><span class=bp>*</span><span class=o>)</span><span class=w> </span><span class=o>[</span><span class=n>CommRing</span><span class=w> </span><span class=n>R</span><span class=o>]</span>
<span class=kd>variable</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=n>d</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>R</span><span class=o>)</span>

<span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>c</span><span class=o>)</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span><span class=w> </span><span class=n>ring</span>

<span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span><span class=w> </span><span class=n>ring</span>

<span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>-</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>-</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span><span class=w> </span><span class=n>ring</span>

<span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>hyp</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>d</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>hyp&#39;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>d</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>d</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=n>hyp</span><span class=o>,</span><span class=w> </span><span class=n>hyp&#39;</span><span class=o>]</span>
<span class=w>  </span><span class=n>ring</span>
</code></pre></div> <p>We leave it to you to check that all the other proofs go through unchanged. Notice that when a proof is short, like <code>by ring</code> or <code>by linarith</code> or <code>by sorry</code>, it is common (and permissible) to put it on the same line as the <code>by</code>. Good proof-writing style should strike a balance between concision and readability.</p> <p>The goal of this section is to strengthen the skills you have developed in the last section and apply them to reasoning axiomatically about rings. We will start with the axioms listed above, and use them to derive other facts. Most of the facts we prove are already in Mathlib. We will give the versions we prove the same names to help you learn the contents of the library as well as the naming conventions.</p> <p>Lean provides an organizational mechanism similar to those used in programming languages: when a definition or theorem <code>foo</code> is introduced in a <em>namespace</em> <code>bar</code>, its full name is <code>bar.foo</code>. The command <code>open bar</code> later <em>opens</em> the namespace, which allows us to use the shorter name <code>foo</code>. To avoid errors due to name clashes, in the next example we put our versions of the library theorems in a new namespace called <code>MyRing.</code></p> <p>The next example shows that we do not need <code>add_zero</code> or <code>add_right_neg</code> as ring axioms, because they follow from the other axioms.</p> <div class=highlight><pre><span></span><code><span class=kn>namespace</span><span class=w> </span><span class=n>MyRing</span>
<span class=kd>variable</span><span class=w> </span><span class=o>{</span><span class=n>R</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kt>Type</span><span class=bp>*</span><span class=o>}</span><span class=w> </span><span class=o>[</span><span class=n>Ring</span><span class=w> </span><span class=n>R</span><span class=o>]</span>

<span class=kd>theorem</span><span class=w> </span><span class=n>add_zero</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>R</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span><span class=w> </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=n>add_comm</span><span class=o>,</span><span class=w> </span><span class=n>zero_add</span><span class=o>]</span>

<span class=kd>theorem</span><span class=w> </span><span class=n>add_right_neg</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>R</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=bp>-</span><span class=n>a</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span><span class=w> </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=n>add_comm</span><span class=o>,</span><span class=w> </span><span class=n>add_left_neg</span><span class=o>]</span>

<span class=k>#check</span><span class=w> </span><span class=n>MyRing.add_zero</span>
<span class=k>#check</span><span class=w> </span><span class=n>add_zero</span>

<span class=kd>end</span><span class=w> </span><span class=n>MyRing</span>
</code></pre></div> <p>The net effect is that we can temporarily reprove a theorem in the library, and then go on using the library version after that. But don't cheat! In the exercises that follow, take care to use only the general facts about rings that we have proved earlier in this section.</p> <p>(If you are paying careful attention, you may have noticed that we changed the round brackets in <code>(R : Type*)</code> for curly brackets in <code>{R : Type*}</code>. This declares <code>R</code> to be an <em>implicit argument</em>. We will explain what this means in a moment, but don't worry about it in the meanwhile.)</p> <p>Here is a useful theorem:</p> <div class=highlight><pre><span></span><code><span class=kd>theorem</span><span class=w> </span><span class=n>neg_add_cancel_left</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>R</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=bp>-</span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=bp>←</span><span class=w> </span><span class=n>add_assoc</span><span class=o>,</span><span class=w> </span><span class=n>add_left_neg</span><span class=o>,</span><span class=w> </span><span class=n>zero_add</span><span class=o>]</span>
</code></pre></div> <p>Prove the companion version:</p> <div class=highlight><pre><span></span><code><span class=kd>theorem</span><span class=w> </span><span class=n>add_neg</span><span class=bp>\*</span><span class=n>cancel</span><span class=bp>\*</span><span class=n>right</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>R</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=bp>-</span><span class=n>b</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=gr>sorry</span>
</code></pre></div> <p>Use these to prove the following:</p> <div class=highlight><pre><span></span><code><span class=kd>theorem</span><span class=w> </span><span class=n>add_left_cancel</span><span class=w> </span><span class=o>{</span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>R</span><span class=o>}</span><span class=w> </span><span class=o>(</span><span class=n>h</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>c</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=gr>sorry</span>

<span class=kd>theorem</span><span class=w> </span><span class=n>add_right_cancel</span><span class=w> </span><span class=o>{</span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>R</span><span class=o>}</span><span class=w> </span><span class=o>(</span><span class=n>h</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=gr>sorry</span>
</code></pre></div> <p>With enough planning, you can do each of them with three rewrites.</p> <p>We will now explain the use of the curly braces. Imagine you are in a situation where you have <code>a</code>, <code>b</code>, and <code>c</code> in your context, as well as a hypothesis <code>h : a + b = a + c</code>, and you would like to draw the conclusion <code>b = c</code>. In Lean, you can apply a theorem to hypotheses and facts just the same way that you can apply them to objects, so you might think that <code>add_left_cancel a b c h</code> is a proof of the fact <code>b = c</code>. But notice that explicitly writing <code>a</code>, <code>b</code>, and <code>c</code> is redundant, because the hypothesis <code>h</code> makes it clear that those are the objects we have in mind. In this case, typing a few extra characters is not onerous, but if we wanted to apply <code>add_left_cancel</code> to more complicated expressions, writing them would be tedious. In cases like these, Lean allows us to mark arguments as <em>implicit</em>, meaning that they are supposed to be left out and inferred by other means, such as later arguments and hypotheses. The curly brackets in<code>{a b c : R}</code>do exactly that. So, given the statement of the theorem above, the correct expression is simply<code>add_left_cancel h</code>.</p> <p>To illustrate, let us show that <code>a * 0 = 0</code> follows from the ring axioms.</p> <div class=highlight><pre><span></span><code><span class=kd>theorem</span><span class=w> </span><span class=n>mul_zero</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>R</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=k>have</span><span class=w> </span><span class=n>h</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=bp>←</span><span class=w> </span><span class=n>mul_add</span><span class=o>,</span><span class=w> </span><span class=n>add_zero</span><span class=o>,</span><span class=w> </span><span class=n>add_zero</span><span class=o>]</span>
<span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=n>add_left_cancel</span><span class=w> </span><span class=n>h</span><span class=o>]</span>
</code></pre></div> <p>We have used a new trick! If you step through the proof, you can see what is going on. The <code>have</code> tactic introduces a new goal, <code>a * 0 + a * 0 = a * 0 + 0</code>, with the same context as the original goal. The fact that the next line is indented indicates that Lean is expecting a block of tactics that serves to prove this new goal. The indentation therefore promotes a modular style of proof: the indented subproof establishes the goal that was introduced by the <code>have</code>. After that, we are back to proving the original goal, except a new hypothesis <code>h</code> has been added: having proved it, we are now free to use it. At this point, the goal is exactly the result of <code>add_left_cancel h</code>.</p> <p>We could equally well have closed the proof with <code>apply add_left_cancel h</code> or <code>exact add_left_cancel h</code>. The <code>exact</code> tactic takes as argument a proof term which completely proves the current goal, without creating any new goal. The <code>apply</code> tactic is a variant whose argument is not necessarily a complete proof. The missing pieces are either inferred automatically by Lean or become new goals to prove. While the <code>exact</code> tactic is technically redundant since it is strictly less powerful than <code>apply</code>, it makes proof scripts slightly clearer to human readers and easier to maintain when the library evolves.</p> <p>Remember that multiplication is not assumed to be commutative, so the following theorem also requires some work.</p> <div class=highlight><pre><span></span><code><span class=kd>theorem</span><span class=w> </span><span class=n>zero_mul</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>R</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=gr>sorry</span>
</code></pre></div> <p>By now, you should also be able replace each <code>sorry</code> in the next exercise with a proof, still using only facts about rings that we have established in this section.</p> <div class=highlight><pre><span></span><code><span class=kd>theorem</span><span class=w> </span><span class=n>neg_eq_of_add_eq_zero</span><span class=w> </span><span class=o>{</span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>R</span><span class=o>}</span><span class=w> </span><span class=o>(</span><span class=n>h</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=mi>0</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=bp>-</span><span class=n>a</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=gr>sorry</span>

<span class=kd>theorem</span><span class=w> </span><span class=n>eq_neg_of_add_eqzero</span><span class=w> </span><span class=o>{</span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>R</span><span class=o>}</span><span class=w> </span><span class=o>(</span><span class=n>h</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=mi>0</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=bp>-</span><span class=n>b</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=gr>sorry</span>

<span class=kd>theorem</span><span class=w> </span><span class=n>neg_zero</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=o>(</span><span class=bp>-</span><span class=mi>0</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>R</span><span class=o>)</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>apply</span><span class=w> </span><span class=n>neg_eq_of_add_eq_zero</span>
<span class=w>  </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=n>add_zero</span><span class=o>]</span>

<span class=kd>theorem</span><span class=w> </span><span class=n>neg_neg</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>R</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=bp>-</span><span class=w> </span><span class=bp>-</span><span class=n>a</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=gr>sorry</span>
</code></pre></div> <p>We had to use the annotation <code>(-0 : R)</code> instead of <code>0</code> in the third theorem because without specifying <code>R</code> it is impossible for Lean to infer which <code>0</code> we have in mind, and by default it would be interpreted as a natural number.</p> <p>In Lean, subtraction in a ring is provably equal to addition of the additive inverse.</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>R</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>-</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=bp>-</span><span class=n>b</span><span class=w> </span><span class=o>:=</span>
<span class=w>  </span><span class=n>sub_eq_add_neg</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>b</span>
</code></pre></div> <p>On the real numbers, it is <em>defined</em> that way:</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℝ</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>-</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=bp>-</span><span class=n>b</span><span class=w> </span><span class=o>:=</span>
<span class=w>  </span><span class=n>rfl</span>

<span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℝ</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>-</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=bp>-</span><span class=n>b</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>rfl</span>
</code></pre></div> <p>The proof term <code>rfl</code> is short for "reflexivity". Presenting it as a proof of <code>a - b = a + -b</code> forces Lean to unfold the definition and recognize both sides as being the same. The <code>rfl</code> tactic does the same. This is an instance of what is known as a <em>definitional equality</em> in Lean's underlying logic. This means that not only can one rewrite with <code>sub_eq_add_neg</code> to replace <code>a - b = a + -b</code>, but in some contexts, when dealing with the real numbers, you can use the two sides of the equation interchangeably. For example, you now have enough information to prove the theorem <code>self_sub</code> from the last section:</p> <div class=highlight><pre><span></span><code><span class=kd>theorem</span><span class=w> </span><span class=n>self_sub</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>R</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>-</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=gr>sorry</span>
</code></pre></div> <p>Show that you can prove this using <code>rw</code>, but if you replace the arbitrary ring <code>R</code> by the real numbers, you can also prove it using either <code>apply</code> or <code>exact</code>.</p> <p>Lean knows that <code>1 + 1 = 2</code> holds in any ring. With a bit of effort, you can use that to prove the theorem <code>two_mul</code> from the last section:</p> <div class=highlight><pre><span></span><code><span class=kd>theorem</span><span class=w> </span><span class=n>one_add_one_eq_two</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=o>(</span><span class=mi>2</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>R</span><span class=o>)</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>norm_num</span>

<span class=kd>theorem</span><span class=w> </span><span class=n>two_mul</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>R</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=gr>sorry</span>
</code></pre></div> <p>We close this section by noting that some of the facts about addition and negation that we established above do not need the full strength of the ring axioms, or even commutativity of addition. The weaker notion of a <em>group</em> can be axiomatized as follows:</p> <div class=highlight><pre><span></span><code><span class=kd>variable</span><span class=w> </span><span class=o>(</span><span class=n>A</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kt>Type</span><span class=bp>*</span><span class=o>)</span><span class=w> </span><span class=o>[</span><span class=n>AddGroup</span><span class=w> </span><span class=n>A</span><span class=o>]</span>

<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>add_assoc</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=bp>∀</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>A</span><span class=o>,</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=o>(</span><span class=n>b</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>c</span><span class=o>))</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>zero_add</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=bp>∀</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>A</span><span class=o>,</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>add_left_neg</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=bp>∀</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>A</span><span class=o>,</span><span class=w> </span><span class=bp>-</span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=mi>0</span><span class=o>)</span>
</code></pre></div> <p>It is conventional to use additive notation when the group operation is commutative, and multiplicative notation otherwise. So Lean defines a multiplicative version as well as the additive version (and also their abelian variants, <code>AddCommGroup</code> and <code>CommGroup</code>).</p> <div class=highlight><pre><span></span><code><span class=kd>variable</span><span class=w> </span><span class=o>{</span><span class=n>G</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kt>Type</span><span class=bp>*</span><span class=o>}</span><span class=w> </span><span class=o>[</span><span class=n>Group</span><span class=w> </span><span class=n>G</span><span class=o>]</span>

<span class=n>rcheck</span><span class=w> </span><span class=o>(</span><span class=n>mul_assoc</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=bp>∀</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>G</span><span class=o>,</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=o>(</span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>c</span><span class=o>))</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>one_mul</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=bp>∀</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>G</span><span class=o>,</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>mul_left_inv</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=bp>∀</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>G</span><span class=o>,</span><span class=w> </span><span class=n>a</span><span class=bp>⁻¹</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=mi>1</span><span class=o>)</span>
</code></pre></div> <p>If you are feeling cocky, try proving the following facts about groups, using only these axioms. You will need to prove a number of helper lemmas along the way. The proofs we have carried out in this section provide some hints.</p> <div class=highlight><pre><span></span><code><span class=kd>theorem</span><span class=w> </span><span class=n>mul_right_inv</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>G</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>\*</span><span class=w> </span><span class=n>a</span><span class=bp>⁻¹</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=gr>sorry</span>

<span class=kd>theorem</span><span class=w> </span><span class=n>mul_one</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>G</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=gr>sorry</span>

<span class=kd>theorem</span><span class=w> </span><span class=n>mul_inv_rev</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>G</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=bp>⁻¹</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>b</span><span class=bp>⁻¹</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=bp>⁻¹</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=gr>sorry</span>
</code></pre></div> <p>Explicitly invoking those lemmas is tedious, so Mathlib provides tactics similar to <code>ring</code> in order to cover most uses: <code>group</code> is for non-commutative multiplicative groups, <code>abel</code> for abelian additive groups, and <code>noncomm_ring</code> for non-commutative rings. It may seem odd that the algebraic structures are called <code>Ring</code> and <code>CommRing</code> while the tactics are named <code>noncomm_ring</code> and <code>ring</code>. This is partly for historical reasons, but also for the convenience of using a shorter name for the tactic that deals with commutative rings, since it is used more often.</p> <h2 id=using-theorems-and-lemmas>Using Theorems and Lemmas<a class=headerlink href=#using-theorems-and-lemmas title="Permanent link">&para;</a></h2> <!-- TODO:fix numref --> <p>Rewriting is great for proving equations, but what about other sorts of theorems? For example, how can we prove an inequality, like the fact that :math:<code>a + e^b \le a + e^c</code> holds whenever :math:<code>b \le c</code>? We have already seen that theorems can be applied to arguments and hypotheses, and that the <code>apply</code> and <code>exact</code> tactics can be used to solve goals. In this section, we will make good use of these tools.</p> <p>Consider the library theorems <code>le_refl</code> and <code>le_trans</code>:</p> <div class=highlight><pre><span></span><code><span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>le_refl</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=bp>∀</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℝ</span><span class=o>,</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>a</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>le_trans</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>c</span><span class=o>)</span>
</code></pre></div> <p>As we explain in more detail in :numref:<code>implication_and_the_universal_quantifier</code>, the implicit parentheses in the statement of <code>le_trans</code> associate to the right, so it should be interpreted as <code>a ≤ b → (b ≤ c → a ≤ c)</code>. The library designers have set the arguments <code>a</code>, <code>b</code> and <code>c</code> to <code>le_trans</code> implicit, so that Lean will <em>not</em> let you provide them explicitly (unless you really insist, as we will discuss later). Rather, it expects to infer them from the context in which they are used. For example, when hypotheses <code>h : a ≤ b</code> and <code>h' : b ≤ c</code> are in the context, all the following work:</p> <div class=highlight><pre><span></span><code><span class=kd>variable</span><span class=w> </span><span class=o>(</span><span class=n>h</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>h&#39;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>c</span><span class=o>)</span>

<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>le_refl</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=bp>∀</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Real</span><span class=o>,</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>a</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>le_refl</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>a</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>le_trans</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>c</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>le_trans</span><span class=w> </span><span class=n>h</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>c</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>le_trans</span><span class=w> </span><span class=n>h</span><span class=w> </span><span class=n>h&#39;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>c</span><span class=o>)</span>
</code></pre></div> <p>The <code>apply</code> tactic takes a proof of a general statement or implication, tries to match the conclusion with the current goal, and leaves the hypotheses, if any, as new goals. If the given proof matches the goal exactly (modulo <em>definitional</em> equality), you can use the <code>exact</code> tactic instead of <code>apply</code>. So, all of these work:</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>x</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℝ</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>h₀</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>y</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>h₁</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>z</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>apply</span><span class=w> </span><span class=n>le_trans</span>
<span class=w>    </span><span class=n>apply</span><span class=w> </span><span class=n>h₀</span>
<span class=w>    </span><span class=n>apply</span><span class=w> </span><span class=n>h₁</span>

<span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>x</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℝ</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>h₀</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>y</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>h₁</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>z</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>apply</span><span class=w> </span><span class=n>le_trans</span><span class=w> </span><span class=n>h₀</span>
<span class=w>  </span><span class=n>apply</span><span class=w> </span><span class=n>h₁</span>

<span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>x</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℝ</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>h₀</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>y</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>h₁</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>z</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=o>:=</span>
<span class=w>  </span><span class=n>le_trans</span><span class=w> </span><span class=n>h₀</span><span class=w> </span><span class=n>h₁</span>

<span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>x</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℝ</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>apply</span><span class=w> </span><span class=n>le_refl</span>

<span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>x</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℝ</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=o>:=</span>
<span class=w>  </span><span class=n>le_refl</span><span class=w> </span><span class=n>x</span>
</code></pre></div> <p>In the first example, applying <code>le_trans</code> creates two goals, and we use the dots to indicate where the proof of each begins. The dots are optional, but they serve to <em>focus</em> the goal: within the block introduced by the dot, only one goal is visible, and it must be completed before the end of the block. Here we end the first block by starting a new one with another dot. We could just as well have decreased the indentation. In the fourth example and in the last example, we avoid going into tactic mode entirely: <code>le_trans h₀ h₁</code> and <code>le_refl x</code> are the proof terms we need.</p> <p>Here are a few more library theorems:</p> <div class=highlight><pre><span></span><code><span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>le_refl</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=bp>∀</span><span class=w> </span><span class=n>a</span><span class=o>,</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>a</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>le_trans</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>c</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>lt_of_le_of_lt</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>c</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>lt_of_lt_of_le</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>c</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>lt_trans</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>c</span><span class=o>)</span>
</code></pre></div> <p>Use them together with <code>apply</code> and <code>exact</code> to prove the following:</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>h₀</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>h₁</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>c</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>h₂</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>d</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>h₃</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>d</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>e</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>e</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=gr>sorry</span>
</code></pre></div> <p>In fact, Lean has a tactic that does this sort of thing automatically:</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>h₀</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>h₁</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>c</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>h₂</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>d</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>h₃</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>d</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>e</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>e</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>linarith</span>
</code></pre></div> <p>The <code>linarith</code> tactic is designed to handle <em>linear arithmetic</em>.</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>h</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=mi>3</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>h&#39;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>a</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>h&#39;&#39;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>d</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=mi>2</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>d</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=mi>5</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>linarith</span>
</code></pre></div> <p>In addition to equations and inequalities in the context, <code>linarith</code> will use additional inequalities that you pass as arguments. In the next example, <code>exp_le_exp.mpr h'</code> is a proof of <code>exp b ≤ exp c</code>, as we will explain in a moment. Notice that, in Lean, we write <code>f x</code> to denote the application of a function <code>f</code> to the argument <code>x</code>, exactly the same way we write <code>h x</code> to denote the result of applying a fact or theorem <code>h</code> to the argument <code>x</code>. Parentheses are only needed for compound arguments, as in <code>f (x + y)</code>. Without the parentheses, <code>f x + y</code> would be parsed as <code>(f x) + y</code>.</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>h</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>a</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>h&#39;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>c</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>exp</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=mi>3</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>exp</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>linarith</span><span class=w> </span><span class=o>[</span><span class=n>exp_le_exp.mpr</span><span class=w> </span><span class=n>h&#39;</span><span class=o>]</span>
</code></pre></div> <p>Here are some more theorems in the library that can be used to establish inequalities on the real numbers.</p> <div class=highlight><pre><span></span><code><span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>exp_le_exp</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>exp</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>exp</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>↔</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>b</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>exp_lt_exp</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>exp</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>exp</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>↔</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>b</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>log_le_log</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>log</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>log</span><span class=w> </span><span class=n>b</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>log_lt_log</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>log</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>log</span><span class=w> </span><span class=n>b</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>add_le_add</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>d</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>d</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>add_le_add_left</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=bp>∀</span><span class=w> </span><span class=n>c</span><span class=o>,</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>add_le_add_right</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=bp>∀</span><span class=w> </span><span class=n>c</span><span class=o>,</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>c</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>add_lt_add_of_le_of_lt</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>d</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>d</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>add_lt_add_of_lt_of_le</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>d</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>d</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>add_lt_add_left</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=bp>∀</span><span class=w> </span><span class=n>c</span><span class=o>,</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>add_lt_add_right</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=bp>∀</span><span class=w> </span><span class=n>c</span><span class=o>,</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>c</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>add_nonneg</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>add_pos</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>add_pos_of_pos_of_nonneg</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>exp_pos</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=bp>∀</span><span class=w> </span><span class=n>a</span><span class=o>,</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>exp</span><span class=w> </span><span class=n>a</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=n>add_le_add_left</span>
</code></pre></div> <p>Some of the theorems, <code>exp_le_exp</code>, <code>exp_lt_exp</code> use a <em>bi-implication</em>, which represents the phrase "if and only if." (You can type it in VS Code with <code>\lr</code> of <code>\iff</code>). We will discuss this connective in greater detail in the next chapter. Such a theorem can be used with <code>rw</code> to rewrite a goal to an equivalent one:</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>h</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>exp</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>exp</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>rw</span><span class=w> </span><span class=o>[</span><span class=n>exp_le_exp</span><span class=o>]</span>
<span class=w>  </span><span class=n>exact</span><span class=w> </span><span class=n>h</span>
</code></pre></div> <p>In this section, however, we will use the fact that if <code>h : A ↔ B</code> is such an equivalence, then <code>h.mp</code> establishes the forward direction, <code>A → B</code>, and <code>h.mpr</code> establishes the reverse direction, <code>B → A</code>. Here, <code>mp</code> stands for "modus ponens" and <code>mpr</code> stands for "modus ponens reverse." You can also use <code>h.1</code> and <code>h.2</code> for <code>h.mp</code> and <code>h.mpr</code>, respectively, if you prefer. Thus the following proof works:</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>h₀</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>h₁</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>d</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>exp</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>e</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>exp</span><span class=w> </span><span class=n>d</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>e</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>apply</span><span class=w> </span><span class=n>add_lt_add_of_lt_of_le</span>
<span class=w>  </span><span class=bp>·</span><span class=w> </span><span class=n>apply</span><span class=w> </span><span class=n>add_lt_add_of_le_of_lt</span><span class=w> </span><span class=n>h₀</span>
<span class=w>    </span><span class=n>apply</span><span class=w> </span><span class=n>exp_lt_exp.mpr</span><span class=w> </span><span class=n>h₁</span>
<span class=w>  </span><span class=n>apply</span><span class=w> </span><span class=n>le_refl</span>
</code></pre></div> <p>The first line, <code>apply add_lt_add_of_lt_of_le</code>, creates two goals, and once again we use a dot to separate the proof of the first from the proof of the second.</p> <p>Try the following examples on your own. The example in the middle shows you that the <code>norm_num</code> tactic can be used to solve concrete numeric goals.</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>h₀</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>d</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>e</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>exp</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>d</span><span class=o>)</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>exp</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>e</span><span class=o>)</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span><span class=w> </span><span class=gr>sorry</span>

<span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=o>(</span><span class=mi>0</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℝ</span><span class=o>)</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span><span class=w> </span><span class=n>norm_num</span>

<span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>h</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>log</span><span class=w> </span><span class=o>(</span><span class=mi>1</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>exp</span><span class=w> </span><span class=n>a</span><span class=o>)</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>log</span><span class=w> </span><span class=o>(</span><span class=mi>1</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>exp</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=k>have</span><span class=w> </span><span class=n>h₀</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>exp</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span><span class=w> </span><span class=gr>sorry</span>
<span class=w>  </span><span class=n>apply</span><span class=w> </span><span class=n>log_le_log</span><span class=w> </span><span class=n>h₀</span>
<span class=w>  </span><span class=gr>sorry</span>
</code></pre></div> <p>From these examples, it should be clear that being able to find the library theorems you need constitutes an important part of formalization. There are a number of strategies you can use:</p> <ul> <li> <p>You can browse Mathlib in its <a href=https://github.com/leanprover-community/mathlib4>GitHub repository</a>.</p> </li> <li> <p>You can use the API documentation on the Mathlib <a href=https://leanprover-community.github.io/mathlib4_docs>web pages</a>.</p> </li> <li> <p>You can rely on Mathlib naming conventions and Ctrl-space completion in the editor to guess a theorem name (or Cmd-space on a Mac keyboard). In Lean, a theorem named <code>A_of_B_of_C</code> establishes something of the form <code>A</code> from hypotheses of the form <code>B</code> and <code>C</code>, where <code>A</code>, <code>B</code>, and <code>C</code> approximate the way we might read the goals out loud. So a theorem establishing something like <code>x + y ≤ ...</code> will probably start with <code>add_le</code>. Typing <code>add_le</code> and hitting Ctrl-space will give you some helpful choices. Note that hitting Ctrl-space twice displays more information about the available completions.</p> </li> <li> <p>If you right-click on an existing theorem name in VS Code, the editor will show a menu with the option to jump to the file where the theorem is defined, and you can find similar theorems nearby.</p> </li> <li> <p>You can use the <code>apply?</code> tactic, which tries to find the relevant theorem in the library.</p> </li> </ul> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=c1>-- apply?</span>
<span class=w>  </span><span class=n>exact</span><span class=w> </span><span class=n>sq_nonneg</span><span class=w> </span><span class=n>a</span>
</code></pre></div> <p>To try out <code>apply?</code> in this example, delete the <code>exact</code> command and uncomment the previous line. Using these tricks, see if you can find what you need to do the next example:</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>h</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>-</span><span class=w> </span><span class=n>exp</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>-</span><span class=w> </span><span class=n>exp</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=gr>sorry</span>
</code></pre></div> <p>Using the same tricks, confirm that <code>linarith</code> instead of <code>apply?</code> can also finish the job.</p> <p>Here is another example of an inequality:</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=k>have</span><span class=w> </span><span class=n>h</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>-</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span>
<span class=w>  </span><span class=k>calc</span>
<span class=w>    </span><span class=n>a</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>-</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>-</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span><span class=w> </span><span class=n>ring</span>
<span class=w>    </span><span class=n>_</span><span class=w> </span><span class=bp>≥</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span><span class=w> </span><span class=n>apply</span><span class=w> </span><span class=n>pow_two_nonneg</span>

<span class=w>  </span><span class=k>calc</span>
<span class=w>    </span><span class=mi>2</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span><span class=w> </span><span class=n>ring</span>
<span class=w>    </span><span class=n>_</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>-</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=o>)</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=n>add_le_add</span><span class=w> </span><span class=o>(</span><span class=n>le_refl</span><span class=w> </span><span class=n>_</span><span class=o>)</span><span class=w> </span><span class=n>h</span>
<span class=w>    </span><span class=n>_</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span><span class=w> </span><span class=n>ring</span>
</code></pre></div> <p>Mathlib tends to put spaces around binary operations like <code>*</code> and <code>^</code>, but in this example, the more compressed format increases readability. There are a number of things worth noticing. First, an expression <code>s ≥ t</code> is definitionally equivalent to <code>t ≤ s</code>. In principle, this means one should be able to use them interchangeably. But some of Lean's automation does not recognize the equivalence, so Mathlib tends to favor <code>≤</code> over <code>≥</code>. Second, we have used the <code>ring</code> tactic extensively. It is a real timesaver! Finally, notice that in the second line of the second <code>calc</code> proof, instead of writing <code>by exact add_le_add (le_refl _) h</code>, we can simply write the proof term <code>add_le_add (le_refl _) h</code>.</p> <p>In fact, the only cleverness in the proof above is figuring out the hypothesis <code>h</code>. Once we have it, the second calculation involves only linear arithmetic, and <code>linarith</code> can handle it:</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=k>have</span><span class=w> </span><span class=n>h</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>-</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span>
<span class=w>  </span><span class=k>calc</span>
<span class=w>    </span><span class=n>a</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>-</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>-</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span><span class=w> </span><span class=n>ring</span>
<span class=w>    </span><span class=n>_</span><span class=w> </span><span class=bp>≥</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span><span class=w> </span><span class=n>apply</span><span class=w> </span><span class=n>pow_two_nonneg</span>
<span class=w>  </span><span class=n>linarith</span>
</code></pre></div> <p>How nice! We challenge you to use these ideas to prove the following theorem. You can use the theorem <code>abs_le'.mpr</code>. You will also need the <code>constructor</code> tactic to split a conjunction to two goals; see :numref:<code>conjunction_and_biimplication</code>.</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=bp>|</span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=bp>|</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=o>)</span><span class=w> </span><span class=bp>/</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=gr>sorry</span>

<span class=k>#check</span><span class=w> </span><span class=n>abs_le&#39;.mpr</span>
</code></pre></div> <p>If you managed to solve this, congratulations! You are well on your way to becoming a master formalizer.</p> <h2 id=more-examples-using-apply-and-rw>More examples using apply and rw<a class=headerlink href=#more-examples-using-apply-and-rw title="Permanent link">&para;</a></h2> <p>The <code>min</code> function on the real numbers is uniquely characterized by the following three facts: section</p> <div class=highlight><pre><span></span><code><span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>min_le_left</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>min</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>a</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>min_le_right</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>min</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>b</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>le_min</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>min</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=o>)</span>
</code></pre></div> <p>Can you guess the names of the theorems that characterize <code>max</code> in a similar way?</p> <p>Notice that we have to apply <code>min</code> to a pair of arguments <code>a</code> and <code>b</code> by writing <code>min a b</code> rather than <code>min (a, b)</code>. Formally, <code>min</code> is a function of type <code>ℝ → ℝ → ℝ</code>. When we write a type like this with multiple arrows, the convention is that the implicit parentheses associate to the right, so the type is interpreted as <code>ℝ → (ℝ → ℝ)</code>. The net effect is that if <code>a</code> and <code>b</code> have type <code>ℝ</code> then <code>min a</code> has type <code>ℝ → ℝ</code> and <code>min a b</code> has type <code>ℝ</code>, so <code>min</code> acts like a function of two arguments, as we expect. Handling multiple arguments in this way is known as <em>currying</em>, after the logician Haskell Curry.</p> <p>The order of operations in Lean can also take some getting used to. Function application binds tighter than infix operations, so the expression <code>min a b + c</code> is interpreted as <code>(min a b) + c</code>. With time, these conventions will become second nature.</p> <p>Using the theorem <code>le_antisymm</code>, we can show that two real numbers are equal if each is less than or equal to the other. Using this and the facts above, we can show that <code>min</code> is commutative:</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>min</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>min</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>apply</span><span class=w> </span><span class=n>le_antisymm</span>
<span class=w>  </span><span class=bp>·</span><span class=w> </span><span class=k>show</span><span class=w> </span><span class=n>min</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>min</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>a</span>
<span class=w>    </span><span class=n>apply</span><span class=w> </span><span class=n>le_min</span>
<span class=w>    </span><span class=bp>·</span><span class=w> </span><span class=n>apply</span><span class=w> </span><span class=n>min_le_right</span>
<span class=w>    </span><span class=n>apply</span><span class=w> </span><span class=n>min_le_left</span>
<span class=w>  </span><span class=bp>·</span><span class=w> </span><span class=k>show</span><span class=w> </span><span class=n>min</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>min</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>b</span>
<span class=w>    </span><span class=n>apply</span><span class=w> </span><span class=n>le_min</span>
<span class=w>    </span><span class=bp>·</span><span class=w> </span><span class=n>apply</span><span class=w> </span><span class=n>min_le_right</span>
<span class=w>    </span><span class=n>apply</span><span class=w> </span><span class=n>min_le_left</span>
</code></pre></div> <p>Here we have used dots to separate proofs of different goals. Our usage is inconsistent: at the outer level, we use dots and indentation for both goals, whereas for the nested proofs, we use dots only until a single goal remains. Both conventions are reasonable and useful. We also use the <code>show</code> tactic to structure the proof and indicate what is being proved in each block. The proof still works without the <code>show</code> commands, but using them makes the proof easier to read and maintain.</p> <p>It may bother you that the proof is repetitive. To foreshadow skills you will learn later on, we note that one way to avoid the repetition is to state a local lemma and then use it:</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>min</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>min</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=k>have</span><span class=w> </span><span class=n>h</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=bp>∀</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℝ</span><span class=o>,</span><span class=w> </span><span class=n>min</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>min</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>    </span><span class=n>intro</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=n>y</span>
<span class=w>    </span><span class=n>apply</span><span class=w> </span><span class=n>le_min</span>
<span class=w>    </span><span class=n>apply</span><span class=w> </span><span class=n>min_le_right</span>
<span class=w>    </span><span class=n>apply</span><span class=w> </span><span class=n>min_le_left</span>
<span class=w>  </span><span class=n>apply</span><span class=w> </span><span class=n>le_antisymm</span>
<span class=w>  </span><span class=n>apply</span><span class=w> </span><span class=n>h</span>
<span class=w>  </span><span class=n>apply</span><span class=w> </span><span class=n>h</span>
</code></pre></div> <p>We will say more about the universal quantifier in :numref:<code>implication_and_the_universal_quantifier</code>, but suffice it to say here that the hypothesis <code>h</code> says that the desired inequality holds for any <code>x</code> and <code>y</code>, and the <code>intro</code> tactic introduces an arbitrary <code>x</code> and <code>y</code> to establish the conclusion. The first <code>apply</code> after <code>le_antisymm</code> implicitly uses <code>h a b</code>, whereas the second one uses <code>h b a</code>.</p> <p>Another solution is to use the <code>repeat</code> tactic, which applies a tactic (or a block) as many times as it can.</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>min</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>min</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>apply</span><span class=w> </span><span class=n>le_antisymm</span>
<span class=w>  </span><span class=n>repeat</span>
<span class=w>    </span><span class=n>apply</span><span class=w> </span><span class=n>le_min</span>
<span class=w>    </span><span class=n>apply</span><span class=w> </span><span class=n>min_le_right</span>
<span class=w>    </span><span class=n>apply</span><span class=w> </span><span class=n>min_le_left</span>
</code></pre></div> <p>We encourage you to prove the following as exercises. You can use either of the tricks just described to shorten the first.</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>max</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>max</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=gr>sorry</span>
<span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>min</span><span class=w> </span><span class=o>(</span><span class=n>min</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>min</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>(</span><span class=n>min</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>c</span><span class=o>)</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=gr>sorry</span>
</code></pre></div> <p>Of course, you are welcome to prove the associativity of <code>max</code> as well.</p> <p>It is an interesting fact that <code>min</code> distributes over <code>max</code> the way that multiplication distributes over addition, and vice-versa. In other words, on the real numbers, we have the identity <code>min a (max b c) = max (min a b) (min a c)</code> as well as the corresponding version with <code>max</code> and <code>min</code> switched. But in the next section we will see that this does <em>not</em> follow from the transitivity and reflexivity of <code>≤</code> and the characterizing properties of <code>min</code> and <code>max</code> enumerated above. We need to use the fact that <code>≤</code> on the real numbers is a <em>total order</em>, which is to say, it satisfies <code>∀ x y, x ≤ y ∨ y ≤ x</code>. Here the disjunction symbol, <code>∨</code>, represents "or". In the first case, we have <code>min x y = x</code>, and in the second case, we have <code>min x y = y</code>. We will learn how to reason by cases in :numref:<code>disjunction</code>, but for now we will stick to examples that don't require the case split.</p> <p>Here is one such example:</p> <div class=highlight><pre><span></span><code><span class=kd>theorem</span><span class=w> </span><span class=n>aux</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>min</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>min</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>c</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>b</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>c</span><span class=o>)</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=gr>sorry</span>
<span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>min</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>min</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>c</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>b</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>c</span><span class=o>)</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=gr>sorry</span>
</code></pre></div> <p>It is clear that <code>aux</code> provides one of the two inequalities needed to prove the equality, but applying it to suitable values yields the other direction as well. As a hint, you can use the theorem <code>add_neg_cancel_right</code> and the <code>linarith</code> tactic.</p> <p>Lean's naming convention is made manifest in the library's name for the triangle inequality:</p> <div class=highlight><pre><span></span><code><span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>abs_add</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=bp>∀</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℝ</span><span class=o>,</span><span class=w> </span><span class=bp>|</span><span class=n>a</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=bp>|</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=bp>|</span><span class=n>a</span><span class=bp>|</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=bp>|</span><span class=n>b</span><span class=bp>|</span><span class=o>)</span>
</code></pre></div> <p>Use it to prove the following variant, using also <code>add_sub_cancel_right</code>:</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=bp>|</span><span class=n>a</span><span class=bp>|</span><span class=w> </span><span class=bp>-</span><span class=w> </span><span class=bp>|</span><span class=n>b</span><span class=bp>|</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=bp>|</span><span class=n>a</span><span class=w> </span><span class=bp>-</span><span class=w> </span><span class=n>b</span><span class=bp>|</span><span class=w> </span><span class=o>:=</span>
<span class=w>  </span><span class=gr>sorry</span>
<span class=kd>end</span>
</code></pre></div> <p>See if you can do this in three lines or less. You can use the theorem <code>sub_add_cancel</code>.</p> <p>Another important relation that we will make use of in the sections to come is the divisibility relation on the natural numbers, <code>x ∣ y</code>. Be careful: the divisibility symbol is <em>not</em> the ordinary bar on your keyboard. Rather, it is a unicode character obtained by typing <code>\|</code> in VS Code. By convention, Mathlib uses <code>dvd</code> to refer to it in theorem names.</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>h₀</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>∣</span><span class=w> </span><span class=n>y</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>h₁</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>∣</span><span class=w> </span><span class=n>z</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>∣</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=o>:=</span>
<span class=w>  </span><span class=n>dvd_trans</span><span class=w> </span><span class=n>h₀</span><span class=w> </span><span class=n>h₁</span>

<span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>∣</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>apply</span><span class=w> </span><span class=n>dvd_mul_of_dvd_left</span>
<span class=w>  </span><span class=n>apply</span><span class=w> </span><span class=n>dvd_mul_left</span>

<span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>∣</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>apply</span><span class=w> </span><span class=n>dvd_mul_left</span>
</code></pre></div> <p>In the last example, the exponent is a natural number, and applying <code>dvd_mul_left</code> forces Lean to expand the definition of <code>x^2</code> to <code>x^1 * x</code>. See if you can guess the names of the theorems you need to prove the following:</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>h</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>∣</span><span class=w> </span><span class=n>w</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>∣</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=o>(</span><span class=n>x</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>z</span><span class=o>)</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>w</span><span class=w> </span><span class=bp>^</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=gr>sorry</span>
<span class=kd>end</span>
</code></pre></div> <p>With respect to divisibility, the <em>greatest common divisor</em>, <code>gcd</code>, and least common multiple, <code>lcm</code>, are analogous to <code>min</code> and <code>max</code>. Since every number divides <code>0</code>, <code>0</code> is really the greatest element with respect to divisibility:</p> <div class=highlight><pre><span></span><code><span class=kd>variable</span><span class=w> </span><span class=o>(</span><span class=n>m</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ℕ</span><span class=o>)</span>

<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>Nat.gcd_zero_right</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Nat.gcd</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>n</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>Nat.gcd_zero_left</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Nat.gcd</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>n</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>Nat.lcm_zero_right</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Nat.lcm</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=mi>0</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>Nat.lcm_zero_left</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Nat.lcm</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=mi>0</span><span class=o>)</span>
</code></pre></div> <p>See if you can guess the names of the theorems you will need to prove the following:</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Nat.gcd</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>Nat.gcd</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=gr>sorry</span>
</code></pre></div> <p>Hint: you can use <code>dvd_antisymm</code>, but if you do, Lean will complain that the expression is ambiguous between the generic theorem and the version <code>Nat.dvd_antisymm</code>, the one specifically for the natural numbers. You can use <code>_root_.dvd_antisymm</code> to specify the generic one; either one will work.</p> <h2 id=proving-facts-about-algebraic-structures>Proving Facts about Algebraic Structures<a class=headerlink href=#proving-facts-about-algebraic-structures title="Permanent link">&para;</a></h2> <p>In :numref:<code>proving_identities_in_algebraic_structures</code>, we saw that many common identities governing the real numbers hold in more general classes of algebraic structures, such as commutative rings. We can use any axioms we want to describe an algebraic structure, not just equations. For example, a <em>partial order</em> consists of a set with a binary relation that is reflexive, transitive, and antisymmetric. like <code>≤</code> on the real numbers. Lean knows about partial orders: TEXT. -/ section</p> <div class=highlight><pre><span></span><code><span class=kd>variable</span><span class=w> </span><span class=o>{</span><span class=n>α</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kt>Type</span><span class=bp>*</span><span class=o>}</span><span class=w> </span><span class=o>[</span><span class=n>PartialOrder</span><span class=w> </span><span class=n>α</span><span class=o>]</span>
<span class=kd>variable</span><span class=w> </span><span class=o>(</span><span class=n>x</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>α</span><span class=o>)</span>

<span class=k>#check</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>y</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>le_refl</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>x</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>le_trans</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>z</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>le_antisymm</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>y</span><span class=o>)</span>
</code></pre></div> <p>Here we are adopting the Mathlib convention of using letters like <code>α</code>, <code>β</code>, and <code>γ</code> (entered as <code>\a</code>, <code>\b</code>, and <code>\g</code>) for arbitrary types. The library often uses letters like <code>R</code> and <code>G</code> for the carriers of algebraic structures like rings and groups, respectively, but in general Greek letters are used for types, especially when there is little or no structure associated with them.</p> <p>Associated to any partial order, <code>≤</code>, there is also a <em>strict partial order</em>, <code>&lt;</code>, which acts somewhat like <code>&lt;</code> on the real numbers. Saying that <code>x</code> is less than <code>y</code> in this order is equivalent to saying that it is less-than-or-equal to <code>y</code> and not equal to <code>y</code>.</p> <div class=highlight><pre><span></span><code><span class=k>#check</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>y</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>lt_irrefl</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=bp>¬</span><span class=w> </span><span class=o>(</span><span class=n>x</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>x</span><span class=o>))</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>lt_trans</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>z</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>lt_of_le_of_lt</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>z</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>lt_of_lt_of_le</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>z</span><span class=o>)</span>

<span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>↔</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>∧</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>≠</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=o>:=</span>
<span class=w>  </span><span class=n>lt_iff_le_and_ne</span>
</code></pre></div> <p>In this example, the symbol <code>∧</code> stands for "and," the symbol <code>¬</code> stands for "not," and <code>x ≠ y</code> abbreviates <code>¬ (x = y)</code>. In :numref:<code>Chapter %s &lt;logic&gt;</code>, you will learn how to use these logical connectives to <em>prove</em> that <code>&lt;</code> has the properties indicated.</p> <p>A <em>lattice</em> is a structure that extends a partial order with operations <code>⊓</code> and <code>⊔</code> that are analogous to <code>min</code> and <code>max</code> on the real numbers:</p> <div class=highlight><pre><span></span><code><span class=kd>variable</span><span class=w> </span><span class=o>{</span><span class=n>α</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kt>Type</span><span class=bp>*</span><span class=o>}</span><span class=w> </span><span class=o>[</span><span class=n>Lattice</span><span class=w> </span><span class=n>α</span><span class=o>]</span>
<span class=kd>variable</span><span class=w> </span><span class=o>(</span><span class=n>x</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>α</span><span class=o>)</span>

<span class=k>#check</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>⊓</span><span class=w> </span><span class=n>y</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>inf_le_left</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>⊓</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>x</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>inf_le_right</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>⊓</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>y</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>le_inf</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>⊓</span><span class=w> </span><span class=n>y</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>⊔</span><span class=w> </span><span class=n>y</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>le_sup_left</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>⊔</span><span class=w> </span><span class=n>y</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>le_sup_right</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>⊔</span><span class=w> </span><span class=n>y</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>sup_le</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>⊔</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>z</span><span class=o>)</span>
</code></pre></div> <p>The characterizations of <code>⊓</code> and <code>⊔</code> justify calling them the <em>greatest lower bound</em> and <em>least upper bound</em>, respectively. You can type them in VS code using <code>\glb</code> and <code>\lub</code>. The symbols are also often called then <em>infimum</em> and the <em>supremum</em>, and Mathlib refers to them as <code>inf</code> and <code>sup</code> in theorem names. To further complicate matters, they are also often called <em>meet</em> and <em>join</em>. Therefore, if you work with lattices, you have to keep the following dictionary in mind:</p> <ul> <li> <p><code>⊓</code> is the <em>greatest lower bound</em>, <em>infimum</em>, or <em>meet</em>.</p> </li> <li> <p><code>⊔</code> is the <em>least upper bound</em>, <em>supremum</em>, or <em>join</em>.</p> </li> </ul> <p>Some instances of lattices include:</p> <ul> <li> <p><code>min</code> and <code>max</code> on any total order, such as the integers or real numbers with <code>≤</code></p> </li> <li> <p><code>∩</code> and <code>∪</code> on the collection of subsets of some domain, with the ordering <code>⊆</code></p> </li> <li> <p><code>∧</code> and <code>∨</code> on boolean truth values, with ordering <code>x ≤ y</code> if either <code>x</code> is false or <code>y</code> is true</p> </li> <li> <p><code>gcd</code> and <code>lcm</code> on the natural numbers (or positive natural numbers), with the divisibility ordering, <code>∣</code></p> </li> <li> <p>the collection of linear subspaces of a vector space, where the greatest lower bound is given by the intersection, the least upper bound is given by the sum of the two spaces, and the ordering is inclusion</p> </li> <li> <p>the collection of topologies on a set (or, in Lean, a type), where the greatest lower bound of two topologies consists of the topology that is generated by their union, the least upper bound is their intersection, and the ordering is reverse inclusion</p> </li> </ul> <p>You can check that, as with <code>min</code> / <code>max</code> and <code>gcd</code> / <code>lcm</code>, you can prove the commutativity and associativity of the infimum and supremum using only their characterizing axioms, together with <code>le_refl</code> and <code>le_trans</code>.</p> <p>Using <code>apply le_trans</code> when seeing a goal <code>x ≤ z</code> is not a great idea. Indeed Lean has no way to guess which intermediate element <code>y</code> we want to use. So <code>apply le_trans</code> produces three goals that look like<code>x ≤ ?a</code>, <code>?a ≤ z</code> and <code>α</code> where <code>?a</code> (probably with a more complicated auto-generated name) stands for the mysterious <code>y</code>. The last goal, with type <code>α</code>, is to provide the value of <code>y</code>. It comes lasts because Lean hopes to automatically infer it from the proof of the first goal <code>x ≤ ?a</code>. In order to avoid this unappealing situation, you can use the <code>calc</code> tactic to explicitly provide <code>y</code>. Alternatively, you can use the <code>trans</code> tactic which takes <code>y</code> as an argument and produces the expected goals <code>x ≤ y</code> and <code>y ≤ z</code>. Of course you can also avoid this issue by providing directly a full proof such as <code>exact le_trans inf_le_left inf_le_right</code>, but this requires a lot more planning.</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>⊓</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>⊓</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=gr>sorry</span>

<span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>⊓</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>⊓</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>⊓</span><span class=w> </span><span class=o>(</span><span class=n>y</span><span class=w> </span><span class=bp>⊓</span><span class=w> </span><span class=n>z</span><span class=o>)</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=gr>sorry</span>

<span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>⊔</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>⊔</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=gr>sorry</span>

<span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>⊔</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>⊔</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>⊔</span><span class=w> </span><span class=o>(</span><span class=n>y</span><span class=w> </span><span class=bp>⊔</span><span class=w> </span><span class=n>z</span><span class=o>)</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=gr>sorry</span>
</code></pre></div> <p>You can find these theorems in the Mathlib as <code>inf_comm</code>, <code>inf_assoc</code>, <code>sup_comm</code>, and <code>sup_assoc</code>, respectively.</p> <p>Another good exercise is to prove the <em>absorption laws</em> using only those axioms:</p> <div class=highlight><pre><span></span><code><span class=kd>theorem</span><span class=w> </span><span class=n>absorb1</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>⊓</span><span class=w> </span><span class=o>(</span><span class=n>x</span><span class=w> </span><span class=bp>⊔</span><span class=w> </span><span class=n>y</span><span class=o>)</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=gr>sorry</span>

<span class=kd>theorem</span><span class=w> </span><span class=n>absorb2</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>⊔</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>⊓</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=gr>sorry</span>
</code></pre></div> <p>These can be found in Mathlib with the names <code>inf_sup_self</code> and <code>sup_inf_self</code>.</p> <p>A lattice that satisfies the additional identities <code>x ⊓ (y ⊔ z) = (x ⊓ y) ⊔ (x ⊓ z)</code> and <code>x ⊔ (y ⊓ z) = (x ⊔ y) ⊓ (x ⊔ z)</code> is called a <em>distributive lattice</em>. Lean knows about these too:</p> <div class=highlight><pre><span></span><code><span class=kd>variable</span><span class=w> </span><span class=o>{</span><span class=n>α</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kt>Type</span><span class=bp>*</span><span class=o>}</span><span class=w> </span><span class=o>[</span><span class=n>DistribLattice</span><span class=w> </span><span class=n>α</span><span class=o>]</span>
<span class=kd>variable</span><span class=w> </span><span class=o>(</span><span class=n>x</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>α</span><span class=o>)</span>

<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>inf_sup_left</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>⊓</span><span class=w> </span><span class=o>(</span><span class=n>y</span><span class=w> </span><span class=bp>⊔</span><span class=w> </span><span class=n>z</span><span class=o>)</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>⊓</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>⊔</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>⊓</span><span class=w> </span><span class=n>z</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>inf_sup_right</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=o>(</span><span class=n>x</span><span class=w> </span><span class=bp>⊔</span><span class=w> </span><span class=n>y</span><span class=o>)</span><span class=w> </span><span class=bp>⊓</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>⊓</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=bp>⊔</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>⊓</span><span class=w> </span><span class=n>z</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>sup_inf_left</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>⊔</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>⊓</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=o>(</span><span class=n>x</span><span class=w> </span><span class=bp>⊔</span><span class=w> </span><span class=n>y</span><span class=o>)</span><span class=w> </span><span class=bp>⊓</span><span class=w> </span><span class=o>(</span><span class=n>x</span><span class=w> </span><span class=bp>⊔</span><span class=w> </span><span class=n>z</span><span class=o>))</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>sup_inf_right</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>⊓</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>⊔</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=o>(</span><span class=n>x</span><span class=w> </span><span class=bp>⊔</span><span class=w> </span><span class=n>z</span><span class=o>)</span><span class=w> </span><span class=bp>⊓</span><span class=w> </span><span class=o>(</span><span class=n>y</span><span class=w> </span><span class=bp>⊔</span><span class=w> </span><span class=n>z</span><span class=o>))</span>
</code></pre></div> <p>The left and right versions are easily shown to be equivalent, given the commutativity of <code>⊓</code> and <code>⊔</code>. It is a good exercise to show that not every lattice is distributive by providing an explicit description of a nondistributive lattice with finitely many elements. It is also a good exercise to show that in any lattice, either distributivity law implies the other:</p> <div class=highlight><pre><span></span><code><span class=kd>variable</span><span class=w> </span><span class=o>{</span><span class=n>α</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kt>Type</span><span class=bp>*</span><span class=o>}</span><span class=w> </span><span class=o>[</span><span class=n>Lattice</span><span class=w> </span><span class=n>α</span><span class=o>]</span>
<span class=kd>variable</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>α</span><span class=o>)</span>

<span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>h</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=bp>∀</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>α</span><span class=o>,</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>⊓</span><span class=w> </span><span class=o>(</span><span class=n>y</span><span class=w> </span><span class=bp>⊔</span><span class=w> </span><span class=n>z</span><span class=o>)</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>⊓</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>⊔</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>⊓</span><span class=w> </span><span class=n>z</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>⊔</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>⊓</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>⊔</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=bp>⊓</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=bp>⊔</span><span class=w> </span><span class=n>c</span><span class=o>)</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=gr>sorry</span>

<span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>h</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=bp>∀</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>α</span><span class=o>,</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>⊔</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>⊓</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=o>(</span><span class=n>x</span><span class=w> </span><span class=bp>⊔</span><span class=w> </span><span class=n>y</span><span class=o>)</span><span class=w> </span><span class=bp>⊓</span><span class=w> </span><span class=o>(</span><span class=n>x</span><span class=w> </span><span class=bp>⊔</span><span class=w> </span><span class=n>z</span><span class=o>))</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>⊓</span><span class=w> </span><span class=o>(</span><span class=n>b</span><span class=w> </span><span class=bp>⊔</span><span class=w> </span><span class=n>c</span><span class=o>)</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>⊓</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>⊔</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>⊓</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=gr>sorry</span>
</code></pre></div> <p>It is possible to combine axiomatic structures into larger ones. For example, a <em>strict ordered ring</em> consists of a commutative ring together with a partial order on the carrier satisfying additional axioms that say that the ring operations are compatible with the order:</p> <div class=highlight><pre><span></span><code><span class=kd>variable</span><span class=w> </span><span class=o>{</span><span class=n>R</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kt>Type</span><span class=bp>*</span><span class=o>}</span><span class=w> </span><span class=o>[</span><span class=n>StrictOrderedRing</span><span class=w> </span><span class=n>R</span><span class=o>]</span>
<span class=kd>variable</span><span class=w> </span><span class=o>(</span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>R</span><span class=o>)</span>

<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>add_le_add_left</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=bp>∀</span><span class=w> </span><span class=n>c</span><span class=o>,</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>b</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>mul_pos</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=o>)</span>
</code></pre></div> <p>:numref:<code>Chapter %s &lt;logic&gt;</code> will provide the means to derive the following from <code>mul_pos</code> and the definition of <code>&lt;</code>:</p> <div class=highlight><pre><span></span><code><span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>mul_nonneg</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>b</span><span class=o>)</span>
</code></pre></div> <p>It is then an extended exercise to show that many common facts used to reason about arithmetic and the ordering on the real numbers hold generically for any ordered ring. Here are a couple of examples you can try, using only properties of rings, partial orders, and the facts enumerated in the last two examples:</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>h</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>-</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=gr>sorry</span>

<span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>h</span><span class=o>:</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>-</span><span class=w> </span><span class=n>a</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=gr>sorry</span>

<span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>h</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>b</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>h&#39;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>c</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=bp>*</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=gr>sorry</span>
</code></pre></div> <p>Finally, here is one last example. A <em>metric space</em> consists of a set equipped with a notion of distance, <code>dist x y</code>, mapping any pair of elements to a real number. The distance function is assumed to satisfy the following axioms:</p> <div class=highlight><pre><span></span><code><span class=kd>variable</span><span class=w> </span><span class=o>{</span><span class=n>X</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kt>Type</span><span class=bp>*</span><span class=o>}</span><span class=w> </span><span class=o>[</span><span class=n>MetricSpace</span><span class=w> </span><span class=n>X</span><span class=o>]</span>
<span class=kd>variable</span><span class=w> </span><span class=o>(</span><span class=n>x</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>X</span><span class=o>)</span>

<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>dist_self</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>dist</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=mi>0</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>dist_comm</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>dist</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>=</span><span class=w> </span><span class=n>dist</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=n>x</span><span class=o>)</span>
<span class=k>#check</span><span class=w> </span><span class=o>(</span><span class=n>dist_triangle</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>dist</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>dist</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=bp>+</span><span class=w> </span><span class=n>dist</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=n>z</span><span class=o>)</span>
</code></pre></div> <p>Having mastered this section, you can show that it follows from these axioms that distances are always nonnegative:</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>(</span><span class=n>x</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>X</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=bp>≤</span><span class=w> </span><span class=n>dist</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=gr>sorry</span>
</code></pre></div> <p>We recommend making use of the theorem <code>nonneg_of_mul_nonneg_left</code>. As you may have guessed, this theorem is called <code>dist_nonneg</code> in Mathlib.</p> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.instant", "search.highlight", "search.share", "content.code.copy", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"alias": true, "default": "latest", "provider": "mike"}}</script> <script src=../../assets/javascripts/bundle.fe8b6f2b.min.js></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> </body> </html>